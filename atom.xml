<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>OreChou&#39;s Workspace</title>
  
  <subtitle>Coding &amp; Reading &amp; Playing &amp; Listening</subtitle>
  <link href="https://orechou.github.io/atom.xml" rel="self"/>
  
  <link href="https://orechou.github.io/"/>
  <updated>2022-03-27T11:15:57.214Z</updated>
  <id>https://orechou.github.io/</id>
  
  <author>
    <name>OreChou</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>ã€iOSã€‘åœ¨åœ°å›¾ä¸­ç»˜åˆ¶åæ ‡è½¨è¿¹</title>
    <link href="https://orechou.github.io/2022/03/27/iOS/iOS_%E5%9C%A8%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%BB%98%E5%88%B6%E5%9D%90%E6%A0%87%E8%BD%A8%E8%BF%B9/"/>
    <id>https://orechou.github.io/2022/03/27/iOS/iOS_%E5%9C%A8%E5%9C%B0%E5%9B%BE%E4%B8%AD%E7%BB%98%E5%88%B6%E5%9D%90%E6%A0%87%E8%BD%A8%E8%BF%B9/</id>
    <published>2022-03-27T09:43:00.000Z</published>
    <updated>2022-03-27T11:15:57.214Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸€ç›´æœ‰æƒ³åšå±äºè‡ªå·±çš„ App çš„æƒ³æ³•ï¼Œé›¶é›¶æ•£æ•£åœ°æœ‰å­¦ä¹ ä¸€äº›å†…å®¹ï¼Œç°åœ¨å†³å®šå¼€å¯ä¸€ä¸ªè®°å½•å­¦ä¹ è¿‡ç¨‹çš„ç³»åˆ—åšæ–‡ï¼Œä»¥æ­¤æ¥å·©å›ºè‡ªå·±æ‰€å­¦åˆ°çš„ iOS å¼€å‘çŸ¥è¯†å’Œæ¿€åŠ±è‡ªå·±æŠŠç¬¬ä¸€ä¸ª App å®ç°å‡ºæ¥ã€‚<br>è„‘æµ·ä¸­ä¸€ç›´æœ‰ä¸ªåšåœ°å›¾ç±»åº”ç”¨çš„æƒ³æ³•ï¼Œæœ¬ç§‘åšç§»åŠ¨è½¨è¿¹ç›¸å…³çš„æ¯•ä¸šè®¾è®¡ã€‚æ­¤ç±»åº”ç”¨ä¸»è¦åŒ…æ‹¬åœ°å›¾ï¼ˆMapï¼‰ã€åæ ‡ç‚¹ï¼ˆLocationï¼‰ã€ç»˜åˆ¶è½¨è¿¹ï¼ˆPolylineï¼‰å‡ ä¸ªè¦ç´ ã€‚è¿™ç¯‡åšæ–‡å°†ä¼šä½¿ç”¨ SwiftUI åœ¨åœ°å›¾ä¸Šè¿æ¥åæ ‡ç‚¹ç»˜åˆ¶å‡ºè½¨è¿¹ã€‚GPS åæ ‡æ•°æ®å¯ä»¥åœ¨ <a href="https://www.microsoft.com/en-us/download/confirmation.aspx?id=52367">microsoft</a> ä¸Šä¸‹è½½ã€‚æ•ˆæœå¦‚ä¸‹ï¼š<br><img src="https://raw.githubusercontent.com/OreChou/PicBed/main/img/polyline_demo.png"><br>é¦–å…ˆåˆ›å»ºä¸€ä¸ª SwiftUI å·¥ç¨‹çš„é¡¹ç›®ï¼Œé¡¹ç›®çš„æ–‡ä»¶ç»„ç»‡å¦‚ä¸‹ï¼š<br><img src="https://raw.githubusercontent.com/OreChou/PicBed/main/img/SwiftUIPolyline_Project.png"><br>å…ˆå®šä¹‰åæ ‡ç‚¹çš„æ•°æ®ç»“æ„ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Location</span>: <span class="title">Hashable</span>, <span class="title">Codable</span>, <span class="title">Identifiable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">Int</span></span><br><span class="line">    <span class="comment">// ç»åº¦</span></span><br><span class="line">    <span class="keyword">var</span> longitude: <span class="type">Double</span></span><br><span class="line">    <span class="comment">// çº¬åº¦</span></span><br><span class="line">    <span class="keyword">var</span> latitude: <span class="type">Double</span></span><br><span class="line">    <span class="keyword">var</span> isValid: <span class="type">Bool</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åæ ‡æ•°æ®çš„ ViewModelï¼Œæˆ‘ä»¬å°†ä» location.json ä¸­åŠ è½½æ‰€æœ‰çš„åæ ‡ç‚¹ï¼Œä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">LocationViewModel</span>: <span class="title">ObservableObject</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Published</span> <span class="keyword">var</span> locations: [<span class="type">Location</span>] <span class="operator">=</span> load(<span class="string">&quot;location.json&quot;</span>)</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">load</span>&lt;<span class="type">T</span>: <span class="type">Decodable</span>&gt;(<span class="keyword">_</span> <span class="params">fileName</span>: <span class="type">String</span>)</span> -&gt; <span class="type">T</span> &#123;</span><br><span class="line">    <span class="comment">// The data value type allows simple byte buffers to take on behavior of Foundation objects.</span></span><br><span class="line">    <span class="keyword">let</span> data: <span class="type">Data</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> file <span class="operator">=</span> <span class="type">Bundle</span>.main.url(forResource: fileName, withExtension: <span class="literal">nil</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>(<span class="string">&quot;Couldn&#x27;t find <span class="subst">\(fileName)</span> in main bundle.&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        data <span class="operator">=</span> <span class="keyword">try</span> <span class="type">Data</span>(contentsOf: file)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>(<span class="string">&quot;Couldn&#x27;t load <span class="subst">\(fileName)</span> from main bundle:<span class="subst">\n</span><span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">do</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> decoder <span class="operator">=</span> <span class="type">JSONDecoder</span>()</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">try</span> decoder.decode(<span class="type">T</span>.<span class="keyword">self</span>, from: data)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">        <span class="built_in">fatalError</span>(<span class="string">&quot;Couldn&#x27;t parse <span class="subst">\(fileName)</span> as <span class="subst">\(T.<span class="keyword">self</span>)</span>:<span class="subst">\n</span><span class="subst">\(error)</span>&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ©ç”¨ <code>UIViewRepresentable</code> è¿™ä¸ªåè®®å®ç°å°† UIKit çš„ UIView é›†æˆåˆ° SwiftUI ä¸­ä½¿ç”¨ã€‚<code>UIViewRepresentable</code> åªåŒ…å«å››ä¸ªæ–¹æ³•ã€‚å…¶ä¸­ <code>makeUIView</code> , <code>updateUIView</code> ç”¨äºåˆ›å»ºå’Œæ›´æ–°è§†å›¾ã€‚<code>makeCoordinator</code> åˆ›å»ºåè°ƒå™¨ï¼Œç”¨äºé€šçŸ¥å…¶å®ƒ UI ä¸è¯¥ View ä¹‹é—´çš„å˜åŒ–æ›´æ–°ã€‚<code>dismantleUIView</code> ç”¨äºåœ¨ç§»é™¤ View æ—¶åšä¸€äº›å–„åæ“ä½œã€‚å››ä¸ªæ–¹æ³•åœ¨ <code>UIViewRepresentable</code> ç”Ÿå‘½å‘¨æœŸä¸­çš„è°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š<br><img src="https://raw.githubusercontent.com/OreChou/PicBed/main/img/UIViewRepresentable_lifecycle.png"><br>æˆ‘ä»¬çš„ MapView ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> SwiftUI</span><br><span class="line"><span class="keyword">import</span> MapKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MapView</span>: <span class="title">UIViewRepresentable</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> locationViewModel <span class="operator">=</span> <span class="type">LocationViewModel</span>()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> mapZoomEdgeInsets <span class="operator">=</span> <span class="type">UIEdgeInsets</span>(top: <span class="number">30.0</span>, left: <span class="number">30.0</span>, bottom: <span class="number">30.0</span>, right: <span class="number">30.0</span>)</span><br><span class="line">      </span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeCoordinator</span>()</span> -&gt; <span class="type">MapViewCoordinator</span> &#123;</span><br><span class="line">        <span class="type">MapViewCoordinator</span>(<span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">makeUIView</span>(<span class="params">context</span>: <span class="type">Context</span>)</span> -&gt; <span class="type">MKMapView</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> mapView <span class="operator">=</span> <span class="type">MKMapView</span>()</span><br><span class="line">        mapView.showsUserLocation <span class="operator">=</span> <span class="literal">true</span></span><br><span class="line">        mapView.delegate <span class="operator">=</span> context.coordinator</span><br><span class="line">        <span class="keyword">return</span> mapView</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">updateUIView</span>(<span class="keyword">_</span> <span class="params">uiView</span>: <span class="type">MKMapView</span>, <span class="params">context</span>: <span class="type">UIViewRepresentableContext</span>&lt;<span class="type">MapView</span>&gt;)</span> &#123;</span><br><span class="line">        updateOverlays(from: uiView)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">updateOverlays</span>(<span class="params">from</span> <span class="params">mapView</span>: <span class="type">MKMapView</span>)</span> &#123;</span><br><span class="line">        mapView.removeOverlays(mapView.overlays)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> coordinates <span class="operator">=</span> [<span class="type">CLLocationCoordinate2D</span>]()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span><span class="operator">..&lt;</span>locationViewModel.locations.count &#123;</span><br><span class="line">            <span class="keyword">let</span> location <span class="operator">=</span> locationViewModel.locations[i]</span><br><span class="line">            coordinates.append(<span class="type">CLLocationCoordinate2D</span>(latitude: location.latitude, longitude: location.longitude))</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> polyline <span class="operator">=</span> <span class="type">MKPolyline</span>(coordinates: coordinates, count: locationViewModel.locations.count)</span><br><span class="line">        mapView.addOverlay(polyline)</span><br><span class="line">        setMapZoomArea(map: mapView, polyline: polyline, edgeInsets: mapZoomEdgeInsets, animated: <span class="literal">true</span>)</span><br><span class="line">    &#125;</span><br><span class="line">      </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setMapZoomArea</span>(<span class="params">map</span>: <span class="type">MKMapView</span>, <span class="params">polyline</span>: <span class="type">MKPolyline</span>, <span class="params">edgeInsets</span>: <span class="type">UIEdgeInsets</span>, <span class="params">animated</span>: <span class="type">Bool</span> <span class="operator">=</span> <span class="literal">false</span>)</span> &#123;</span><br><span class="line">        map.setVisibleMapRect(polyline.boundingMapRect, edgePadding: edgeInsets, animated: animated)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">MapView_Previews</span>: <span class="title">PreviewProvider</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">var</span> previews: <span class="keyword">some</span> <span class="type">View</span> &#123;</span><br><span class="line">        <span class="type">MapView</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åè°ƒå™¨ MayViewCoordinator ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"><span class="keyword">import</span> MapKit</span><br><span class="line"></span><br><span class="line"><span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">MapViewCoordinator</span>: <span class="title">NSObject</span>, <span class="title">MKMapViewDelegate</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">let</span> mapView: <span class="type">MapView</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">init</span>(<span class="keyword">_</span> <span class="params">control</span>: <span class="type">MapView</span>)</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.mapView <span class="operator">=</span> control</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">mapView</span>(<span class="keyword">_</span> <span class="params">mapView</span>: <span class="type">MKMapView</span>, <span class="params">didAdd</span> <span class="params">views</span>: [<span class="type">MKAnnotationView</span>])</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> annotationView <span class="operator">=</span> views.first, <span class="keyword">let</span> annotation <span class="operator">=</span> annotationView.annotation &#123;</span><br><span class="line">            <span class="keyword">if</span> annotation <span class="keyword">is</span> <span class="type">MKUserLocation</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> region <span class="operator">=</span> <span class="type">MKCoordinateRegion</span>(center: annotation.coordinate, latitudinalMeters: <span class="number">1000</span>, longitudinalMeters: <span class="number">1000</span>)</span><br><span class="line">                mapView.setRegion(region, animated: <span class="literal">true</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">mapView</span>(<span class="keyword">_</span> <span class="params">mapView</span>: <span class="type">MKMapView</span>, <span class="params">rendererFor</span> <span class="params">overlay</span>: <span class="type">MKOverlay</span>)</span> -&gt; <span class="type">MKOverlayRenderer</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> renderer <span class="operator">=</span> <span class="type">MKPolylineRenderer</span>(overlay: overlay)</span><br><span class="line">        <span class="comment">// set the line properties such as color and width</span></span><br><span class="line">        renderer.strokeColor <span class="operator">=</span> .blue</span><br><span class="line">        renderer.lineWidth <span class="operator">=</span> <span class="number">3.0</span></span><br><span class="line">        <span class="keyword">return</span> renderer</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å‚è€ƒé“¾æ¥<br><a href="https://www.fatbobman.com/posts/uikitInSwiftUI/">https://www.fatbobman.com/posts/uikitInSwiftUI/</a><br><a href="https://medium.com/@mauvazquez/decoding-a-polyline-and-drawing-it-with-swiftui-mapkit-611952bd0ecb">https://medium.com/@mauvazquez/decoding-a-polyline-and-drawing-it-with-swiftui-mapkit-611952bd0ecb</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸€ç›´æœ‰æƒ³åšå±äºè‡ªå·±çš„ App çš„æƒ³æ³•ï¼Œé›¶é›¶æ•£æ•£åœ°æœ‰å­¦ä¹ ä¸€äº›å†…å®¹ï¼Œç°åœ¨å†³å®šå¼€å¯ä¸€ä¸ªè®°å½•å­¦ä¹ è¿‡ç¨‹çš„ç³»åˆ—åšæ–‡ï¼Œä»¥æ­¤æ¥å·©å›ºè‡ªå·±æ‰€å­¦åˆ°çš„ iOS å¼€å‘çŸ¥è¯†å’Œæ¿€åŠ±è‡ªå·±æŠŠç¬¬ä¸€ä¸ª App å®ç°å‡ºæ¥ã€‚&lt;br&gt;è„‘æµ·ä¸­ä¸€ç›´æœ‰ä¸ªåšåœ°å›¾ç±»åº”ç”¨çš„æƒ³æ³•ï¼Œæœ¬ç§‘åšç§»åŠ¨è½¨è¿¹ç›¸å…³çš„æ¯•ä¸šè®¾è®¡ã€‚æ­¤ç±»åº”ç”¨ä¸»è¦åŒ…æ‹¬åœ°å›¾</summary>
      
    
    
    
    
    <category term="iOS" scheme="https://orechou.github.io/tags/iOS/"/>
    
    <category term="SwiftUI" scheme="https://orechou.github.io/tags/SwiftUI/"/>
    
  </entry>
  
  <entry>
    <title>ã€ç”Ÿæ´»ã€‘è®°äº‹ä¸€åˆ™</title>
    <link href="https://orechou.github.io/2022/02/13/life/%E8%AE%B0%E4%BA%8B%E4%B8%80%E5%88%99/"/>
    <id>https://orechou.github.io/2022/02/13/life/%E8%AE%B0%E4%BA%8B%E4%B8%80%E5%88%99/</id>
    <published>2022-02-13T07:40:00.000Z</published>
    <updated>2022-03-27T11:13:56.576Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸‹åˆï¼Œyoyo å’Œä¸¤æ”¯å°ğŸ±è™åœ¨ğŸ˜´ã€‚æˆ‘ååœ¨å®¢å…å†™ä¸€äº›æ–‡å­—ï¼Œè®°å½•ä¸€ä¸‹å¿ƒæƒ…ã€‚</p><p>é¦–å…ˆè¦è¯´çš„æ˜¯ï¼Œå¹´å‰æˆ‘å’Œ yoyo åœ¨è€å®¶ä¸¾åŠå®Œäº†å©šç¤¼ï¼Œè™½ç„¶æˆ‘ä»¬è¿˜æ²¡æœ‰é¢†è¯ï¼Œä½†ç»ˆäºæˆ‘ä»¬ä¹Ÿç®—æ˜¯å®Œæˆäº†å»å¹´æœ€å¤§ã€æœ€é‡è¦çš„ä¸€ä¸ª OKRã€‚ç°åœ¨ yoyo ä¹ŸğŸ¤°ğŸ»äº†ï¼Œè™½ç„¶è¿™ä¹Ÿæ˜¯ä¹‹å‰ä¸€ç›´è®¡åˆ’çš„äº‹æƒ…ï¼Œä½†å½“ ta çœŸçš„æ¥äº†çš„äº‹æƒ…ï¼Œæˆ‘å†…å¿ƒé™¤äº†æƒŠå–œ maxï¼Œè¿˜æ˜¯æœ‰äº›æ…Œå¼ çš„ã€‚è¿™ç§æ…Œå¼ ä¸èƒ½è®© yoyo çœ‹å‡ºæ¥ã€‚å¹´åæ²¡å‡ å¤©æˆ‘è·Ÿ yoyo å°±å·¥ä½œåŸå¸‚æ·±åœ³äº†ï¼Œè¿™åº§åŸå¸‚æ˜¯å¾ˆå¿™ç¢Œã€åŠ³ç´¯çš„ã€‚æ‰€ä»¥è¿™æ®µæ—¶é—´ï¼Œæˆ‘ä¹Ÿä¸€ç›´åœ¨è€ƒè™‘æ€ä¹ˆè®©æˆ‘ä»¬æ›´åŠ è½»æ¾ä¸€äº›ã€‚æ‰€ä»¥ç°åœ¨å…³æ³¨äº†æœ¬èº«å·¥ä½œä¹‹å¤–çš„ä¸€äº›å†…å®¹ï¼Œä¾‹å¦‚ åŒºå—é“¾ã€NFTsã€ç¾è‚¡ç­‰ç­‰ï¼Œæƒ³è¦æ‰¾åˆ°ä¸€äº›è™½ä¸èƒ½è¯´å®Œæˆè·¨è¶Šï¼Œä½†è‡³å°‘èƒ½è®©è‡ªå·±å·¥ä½œä¸é‚£ä¹ˆç´¯çš„äº‹æƒ…ã€‚æˆ‘ä¹Ÿä¸€ç›´åœ¨è€ƒè™‘æœªæ¥è‡ªç”±èŒä¸šçš„é“è·¯ï¼Œä½†æ— å¥ˆè‡ªå·±ç°åœ¨å¾ˆç¼ºä¹è‡ªä¿¡å’Œå¯¹è‡ªå·±çš„è®¤åŒã€‚</p><p>ä»Šå¹´å®šäº†å‡ ä¸ª OKRï¼ŒåŠªåŠ›å»å®ç°å§ã€‚å¦å¤–æˆ‘å¾—æ”¾æ¾ä½“éªŒç”Ÿæ´»ã€‚ä¸ç®¡å†å¤šäº‹æƒ…ï¼Œç”Ÿæ´»æ˜¯æˆ‘ä»¬è‡ªå·±çš„ã€‚å…ˆä¸è¯´è¿™ä¹ˆå¤šäº†ï¼Œæˆ‘å¾—å« yoyo èµ·æ¥å‡ºå»æ•£æ­¥äº†ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸‹åˆï¼Œyoyo å’Œä¸¤æ”¯å°ğŸ±è™åœ¨ğŸ˜´ã€‚æˆ‘ååœ¨å®¢å…å†™ä¸€äº›æ–‡å­—ï¼Œè®°å½•ä¸€ä¸‹å¿ƒæƒ…ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆè¦è¯´çš„æ˜¯ï¼Œå¹´å‰æˆ‘å’Œ yoyo åœ¨è€å®¶ä¸¾åŠå®Œäº†å©šç¤¼ï¼Œè™½ç„¶æˆ‘ä»¬è¿˜æ²¡æœ‰é¢†è¯ï¼Œä½†ç»ˆäºæˆ‘ä»¬ä¹Ÿç®—æ˜¯å®Œæˆäº†å»å¹´æœ€å¤§ã€æœ€é‡è¦çš„ä¸€ä¸ª OKRã€‚ç°åœ¨ yoyo ä¹ŸğŸ¤°ğŸ»äº†ï¼Œè™½ç„¶è¿™ä¹Ÿæ˜¯ä¹‹å‰ä¸€ç›´è®¡åˆ’çš„äº‹</summary>
      
    
    
    
    
    <category term="Life" scheme="https://orechou.github.io/tags/Life/"/>
    
  </entry>
  
  <entry>
    <title>ã€MySQLã€‘å®ç°åˆ—è¡¨æ•°æ®ç½®é¡¶</title>
    <link href="https://orechou.github.io/2021/08/16/mysql/MySQL_%E5%AE%9E%E7%8E%B0%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE%E7%BD%AE%E9%A1%B6/"/>
    <id>https://orechou.github.io/2021/08/16/mysql/MySQL_%E5%AE%9E%E7%8E%B0%E5%88%97%E8%A1%A8%E6%95%B0%E6%8D%AE%E7%BD%AE%E9%A1%B6/</id>
    <published>2021-08-16T06:46:00.000Z</published>
    <updated>2022-03-27T11:14:09.194Z</updated>
    
    <content type="html"><![CDATA[<p>æœ‰çš„åˆ—è¡¨è·å–çš„ä¸šåŠ¡åœºæ™¯ï¼Œéœ€è¦æ ¹æ®ä¸€äº›æ¡ä»¶å°†æ•°æ®ç½®é¡¶ã€‚</p><p>ä¾‹å¦‚æœ‰ä¸€å¼ è¡¨æœ‰ id å’Œ name ä¸¤ä¸ªå­—æ®µã€‚æ•°æ®è¡¨å¦‚ä¸‹ã€‚</p><table><thead><tr><th>id</th><th>name</th></tr></thead><tbody><tr><td>1</td><td>1_name</td></tr><tr><td>2</td><td>2_name</td></tr><tr><td>3</td><td>3_name</td></tr><tr><td>4</td><td>4_name</td></tr><tr><td>5</td><td>5_name</td></tr><tr><td>6</td><td>6_name</td></tr><tr><td>7</td><td>7_name</td></tr><tr><td>8</td><td>8_name</td></tr><tr><td>9</td><td>9_name</td></tr><tr><td>10</td><td>10_name</td></tr></tbody></table><p>è‹¥éœ€è¦å°† id ä¸º 5 å’Œ 7 çš„æ•°æ®ç½®é¡¶ï¼Œå¹¶ä¸”åˆ†é¡µçš„ size æ˜¯ 5 çš„è¯ï¼Œæˆ‘ä»¬çš„ SQL å¯ä»¥è¿™æ ·å†™ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM goods ORDER BY </span><br><span class="line">CASE </span><br><span class="line">WHEN id = 5 THEN -10000</span><br><span class="line">WHEN id = 7 THEN -9999 </span><br><span class="line">ELSE id </span><br><span class="line">END</span><br><span class="line">LIMIT 0, 5</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æœ‰çš„åˆ—è¡¨è·å–çš„ä¸šåŠ¡åœºæ™¯ï¼Œéœ€è¦æ ¹æ®ä¸€äº›æ¡ä»¶å°†æ•°æ®ç½®é¡¶ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚æœ‰ä¸€å¼ è¡¨æœ‰ id å’Œ name ä¸¤ä¸ªå­—æ®µã€‚æ•°æ®è¡¨å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;id&lt;/th&gt;
&lt;th&gt;name&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;</summary>
      
    
    
    
    
    <category term="MySQL" scheme="https://orechou.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>ã€MySQLã€‘æ…¢ SQL åˆ†æ</title>
    <link href="https://orechou.github.io/2021/08/10/mysql/MySQL_%E6%85%A2%20SQL%20%E5%88%86%E6%9E%90/"/>
    <id>https://orechou.github.io/2021/08/10/mysql/MySQL_%E6%85%A2%20SQL%20%E5%88%86%E6%9E%90/</id>
    <published>2021-08-10T04:30:00.000Z</published>
    <updated>2022-03-27T11:14:03.743Z</updated>
    
    <content type="html"><![CDATA[<h2 id="æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ"><a href="#æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ" class="headerlink" title="æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ"></a>æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ</h2><h3 id="è®¾ç½®æ…¢æŸ¥è¯¢"><a href="#è®¾ç½®æ…¢æŸ¥è¯¢" class="headerlink" title="è®¾ç½®æ…¢æŸ¥è¯¢"></a>è®¾ç½®æ…¢æŸ¥è¯¢</h3><p>å¯ä»¥é€šè¿‡ä¿®æ”¹å‘½ä»¤è®¾ç½®ï¼š</p><ul><li>è®¾ç½®å¼€å¯ï¼šSET GLOBAL slow_query_log = 1; #é»˜è®¤æœªå¼€å¯ï¼Œå¼€å¯ä¼šå½±å“æ€§èƒ½ï¼Œmysqlé‡å¯ä¼šå¤±æ•ˆ</li><li>æŸ¥çœ‹æ˜¯å¦å¼€å¯ï¼šSHOW VARIABLES LIKE â€˜%slow_query_log%â€™;</li><li>è®¾ç½®é˜ˆå€¼ï¼šSET GLOBAL long_query_time=3;</li><li>æŸ¥çœ‹é˜ˆå€¼ï¼šSHOW ã€GLOBALã€‘ VARIABLES LIKE â€˜long_query_time%â€™; #é‡è¿æˆ–æ–°å¼€ä¸€ä¸ªä¼šè¯æ‰èƒ½çœ‹åˆ°ä¿®æ”¹å€¼</li></ul><p>ä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶è®¾ç½®ï¼Œé…ç½®æ–‡ä»¶ my.conf ä¼šä¸€ç›´ç”Ÿæ•ˆï¼Œåœ¨[mysqld]ä¸‹é…ç½®ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[mysqld]</span><br><span class="line">slow_query_log = 1;ã€€ã€€#å¼€å¯</span><br><span class="line">slow_query_log_file=/var/lib/mysql/atguigu-slow.logã€€ã€€ã€€#æ…¢æ—¥å¿—åœ°å€ï¼Œç¼ºçœæ–‡ä»¶åhost_name-slow.log</span><br><span class="line">long_query_time=3;ã€€ã€€  #è¿è¡Œæ—¶é—´è¶…è¿‡è¯¥å€¼çš„SQLä¼šè¢«è®°å½•ï¼Œé»˜è®¤å€¼&gt;10</span><br><span class="line">log_output=FILEã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€</span><br></pre></td></tr></table></figure><h3 id="è·å–æ…¢-SQL-ä¿¡æ¯"><a href="#è·å–æ…¢-SQL-ä¿¡æ¯" class="headerlink" title="è·å–æ…¢ SQL ä¿¡æ¯"></a>è·å–æ…¢ SQL ä¿¡æ¯</h3><p>æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—è®°å½•æ•°ï¼šSHOW GLOBAL STATUS LIKE â€˜%Slow_queries%â€™;</p><p>æ¨¡æ‹Ÿè¯­å¥ï¼šSELECT SLEEP(4);</p><p>æŸ¥çœ‹æ…¢æŸ¥è¯¢æ—¥å¿—ï¼š</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ cat /usr/local/var/mysql/OreChoudeMacBook-Pro-slow.log</span><br><span class="line">/usr/local/Cellar/mysql/8.0.25_1/bin/mysqld, Version: 8.0.25 (Homebrew). started with:</span><br><span class="line">Tcp port: 3306  Unix socket: /tmp/mysql.sock</span><br><span class="line">Time                 Id Command    Argument</span><br><span class="line"># Time: 2021-08-10T06:29:53.513752Z</span><br><span class="line"># User@Host: root[root] @ localhost [127.0.0.1]  Id:    11</span><br><span class="line"># Query_time: 4.003605  Lock_time: 0.000000 Rows_sent: 1  Rows_examined: 1</span><br><span class="line">use test;</span><br><span class="line">SET timestamp=1628576989;</span><br><span class="line">select sleep(4);</span><br></pre></td></tr></table></figure><h3 id="ä½¿ç”¨-mysqldumpslow-åˆ†æ"><a href="#ä½¿ç”¨-mysqldumpslow-åˆ†æ" class="headerlink" title="ä½¿ç”¨ mysqldumpslow åˆ†æ"></a>ä½¿ç”¨ mysqldumpslow åˆ†æ</h3><p>ä½¿ç”¨æ ·ä¾‹ï¼š</p><ul><li>mysqldumpslow -s r -t 10 /usr/local/var/mysql/OreChoudeMacBook-Pro-slow.log     #å¾—åˆ°è¿”å›è®°å½•é›†æœ€å¤šçš„10ä¸ªSQL</li><li>mysqldumpslow -s c -t 10 /usr/local/var/mysql/OreChoudeMacBook-Pro-slow.log     #å¾—åˆ°è®¿é—®æ¬¡æ•°æœ€å¤šçš„10ä¸ªSQL</li><li>mysqldumpslow -s t -t 10 -g â€œLEFT JOINâ€ /usr/local/var/mysql/OreChoudeMacBook-Pro-slow.log   #å¾—åˆ°æŒ‰ç…§æ—¶é—´æ’åºçš„å‰10æ¡é‡Œé¢å«æœ‰å·¦è¿æ¥çš„æŸ¥è¯¢è¯­å¥</li><li>mysqldumpslow -s r -t 10 /usr/local/var/mysql/OreChoudeMacBook-Pro-slow.log | more      #ç»“åˆ| moreä½¿ç”¨ï¼Œé˜²æ­¢çˆ†å±æƒ…å†µ</li></ul><h2 id="Explain-åˆ†æ"><a href="#Explain-åˆ†æ" class="headerlink" title="Explain åˆ†æ"></a>Explain åˆ†æ</h2><h2 id="Show-Profile-åˆ†æ"><a href="#Show-Profile-åˆ†æ" class="headerlink" title="Show Profile åˆ†æ"></a>Show Profile åˆ†æ</h2><p>Show Profile èƒ½å¤Ÿè·å–æ¯” Explain æ›´ä¸ºè¯¦ç»†çš„ä¿¡æ¯ï¼Œèƒ½å¤Ÿåˆ†æå½“å‰ä¼šè¯ä¸­è¯­å¥æ‰§è¡Œæ—¶çš„èµ„æºæ¶ˆè€—ï¼Œè·å– SQL åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸçš„æ—¶é—´ã€‚</p><h3 id="å¼€å¯-Profile"><a href="#å¼€å¯-Profile" class="headerlink" title="å¼€å¯ Profile"></a>å¼€å¯ Profile</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">å¼€å¯ï¼šset profiling = on;</span><br><span class="line">æŸ¥çœ‹ï¼šSHOW VARIABLES LIKE &#x27;profiling%&#x27;;</span><br></pre></td></tr></table></figure><p>å¼€å¯å MySQL åå°ä¼šä¿å­˜æœ€è¿‘ 15 æ¬¡çš„ç»“æœã€‚</p><h3 id="æŸ¥çœ‹-Profile"><a href="#æŸ¥çœ‹-Profile" class="headerlink" title="æŸ¥çœ‹ Profile"></a>æŸ¥çœ‹ Profile</h3><p>ä½¿ç”¨ SHOW PROFILES å¯ä»¥æŸ¥çœ‹æœ€è¿‘çš„ 15 æ¬¡ç»“æœã€‚</p><h3 id="æŸ¥çœ‹å…·ä½“çš„-Profile"><a href="#æŸ¥çœ‹å…·ä½“çš„-Profile" class="headerlink" title="æŸ¥çœ‹å…·ä½“çš„ Profile"></a>æŸ¥çœ‹å…·ä½“çš„ Profile</h3><p>é€šè¿‡ Query_ID å¯ä»¥å¾—åˆ°å…·ä½“ SQL ä»è¿æ¥ - æœåŠ¡ - å¼•æ“ - å­˜å‚¨å››å±‚ç»“æ„å®Œæ•´ç”Ÿå‘½å‘¨æœŸçš„è€—æ—¶ã€‚</p><p>ä½¿ç”¨å‘½ä»¤ï¼šSHOW PROFILE CPU, BLOCK IO FOR Query_ID</p><p>å¯ç”¨å‚æ•°type:</p><ul><li>ALL  ã€€ã€€#æ˜¾ç¤ºæ‰€æœ‰çš„å¼€é”€ä¿¡æ¯</li><li>BLOCK IOã€€ã€€#æ˜¾ç¤ºå—IOç›¸å…³å¼€é”€</li><li>CONTEXT SWITCHESã€€ã€€#ä¸Šä¸‹æ–‡åˆ‡æ¢ç›¸å…³å¼€é”€</li><li>CPU     #æ˜¾ç¤ºCPUç›¸å…³å¼€é”€ä¿¡æ¯</li><li>IPC     #æ˜¾ç¤ºå‘é€å’Œæ¥æ”¶ç›¸å…³å¼€é”€ä¿¡æ¯</li><li>MEMORYã€€#æ˜¾ç¤ºå†…å­˜ç›¸å…³å¼€é”€ä¿¡æ¯</li><li>PAGE FAULTSã€€ã€€#æ˜¾ç¤ºé¡µé¢é”™è¯¯ç›¸å…³å¼€é”€ä¿¡æ¯</li><li>SOURCEã€€ã€€#æ˜¾ç¤ºå’ŒSource_functionï¼ŒSource_fileï¼ŒSource_lineç›¸å…³çš„å¼€é”€ä¿¡æ¯</li><li>SWAPSã€€ã€€#æ˜¾ç¤ºäº¤æ¢æ¬¡æ•°ç›¸å…³å¼€é”€çš„ä¿¡æ¯</li></ul><p>å¦‚æœå‡ºç°ä»¥ä¸‹å‡ ä¸ªçŠ¶æ€åˆ™ SQL éœ€è¦é‡ç‚¹åˆ†æï¼š</p><ul><li>converting HEAP to MyISAM  ã€€ã€€#æŸ¥è¯¢ç»“æœå¤ªå¤§ï¼Œå†…å­˜ä¸å¤Ÿç”¨äº†ï¼Œåœ¨å¾€ç£ç›˜ä¸Šæ¬</li><li>Creating tmp table         ã€€ã€€#åˆ›å»ºäº†ä¸´æ—¶è¡¨ï¼Œå›å…ˆæŠŠæ•°æ®æ‹·è´åˆ°ä¸´æ—¶è¡¨ï¼Œç”¨å®Œåå†åˆ é™¤ä¸´æ—¶è¡¨</li><li>Copying to tmp table on disk ã€€#æŠŠå†…å­˜ä¸­ä¸´æ—¶è¡¨å¤åˆ¶åˆ°ç£ç›˜ï¼Œå±é™©ï¼ï¼ï¼</li><li>locked</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ&quot;&gt;&lt;a href=&quot;#æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ&quot;&gt;&lt;/a&gt;æ…¢æŸ¥è¯¢æ—¥å¿—åˆ†æ&lt;/h2&gt;&lt;h3 id=&quot;è®¾ç½®æ…¢æŸ¥è¯¢&quot;&gt;&lt;a href=&quot;#è®¾ç½®æ…¢æŸ¥è¯¢&quot; class=&quot;headerlink&quot; ti</summary>
      
    
    
    
    
    <category term="MySQL" scheme="https://orechou.github.io/tags/MySQL/"/>
    
  </entry>
  
  <entry>
    <title>ã€MySQLã€‘Explain</title>
    <link href="https://orechou.github.io/2021/08/06/mysql/MySQL_Explain/"/>
    <id>https://orechou.github.io/2021/08/06/mysql/MySQL_Explain/</id>
    <published>2021-08-06T09:00:00.000Z</published>
    <updated>2022-03-27T11:14:13.632Z</updated>
    
    <content type="html"><![CDATA[<h1 id="MySQL-Explain"><a href="#MySQL-Explain" class="headerlink" title="MySQL Explain"></a>MySQL Explain</h1><p>Explain æ˜¯ MySQL è‡ªå¸¦çš„æŸ¥è¯¢ä¼˜åŒ–å™¨ã€‚</p><p>ä½¿ç”¨ Explain + SQL å¯æŸ¥è¯¢å‡ºæ‰§è¡Œçš„ç›¸å…³ä¿¡æ¯ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹ 10 ä¸ªå±æ€§ï¼š<br>id, select_type, table, type, possible_key, key, key_len, ref, row, filtered, Extra</p><p>æ•°æ®åº“æ€§èƒ½ç“¶é¢ˆï¼Œä¸»è¦å…³æ³¨ CPU å’Œ IOã€‚</p><h2 id="id"><a href="#id" class="headerlink" title="id"></a>id</h2><p>åæ˜ çš„æ˜¯è¡¨çš„è¯»å–é¡ºåºï¼Œæˆ–è€…æŸ¥è¯¢ä¸­ SELECT çš„æ‰§è¡Œé¡ºåºã€‚</p><p>å°è¡¨æ°¸è¿œé©±åŠ¨å¤§è¡¨ï¼Œä¸‰ç§æƒ…å†µï¼š<br>ï¼ˆ1ï¼‰id ç›¸åŒï¼Œæ‰§è¡Œé¡ºåºæ˜¯ç”±ä¸Šè‡³ä¸‹çš„<br>ï¼ˆ2ï¼‰id ä¸åŒï¼Œå¦‚æœæ˜¯å­æŸ¥è¯¢ï¼Œid åºå·ä¼šé€’å¢ï¼Œid å€¼è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜ï¼Œè¶Šå…ˆè¢«æ‰§è¡Œ<br>ï¼ˆ3ï¼‰id å­˜åœ¨ç›¸åŒçš„ï¼Œä¹Ÿå­˜åœ¨ä¸åŒçš„ï¼Œæ‰€æœ‰ç»„ä¸­ï¼Œid è¶Šå¤§è¶Šå…ˆæ‰§è¡Œï¼Œå¦‚æœ id ç›¸åŒçš„ï¼Œä»ä¸Šå¾€ä¸‹é¡ºåºæ‰§è¡Œ</p><h2 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h2><p>åæ˜ çš„æ˜¯ MySQL ç†è§£çš„æŸ¥è¯¢ç±»å‹ï¼Œæœ‰å‡ ä¸‹å‡ ç§ï¼š</p><ul><li>SIMPLEï¼šç®€å•çš„ SELECT æŸ¥è¯¢ï¼ŒæŸ¥è¯¢ä¸­ä¸åŒ…å«å­æŸ¥è¯¢æˆ– UNION</li><li>PRIMARYï¼šæŸ¥è¯¢ä¸­è‹¥åŒ…å«ä»»ä½•å¤æ‚çš„å­—éƒ¨åˆ†ï¼Œæœ€å¤–å±‚æŸ¥è¯¢æ ‡è®°ä¸º PRIMARY</li><li>SUBQUERYï¼šSELECT æˆ– WHERE åˆ—è¡¨ä¸­çš„å­æŸ¥è¯¢</li><li>DERIVEDï¼šåœ¨ FROM åˆ—è¡¨ä¸­åŒ…å«çš„å­æŸ¥è¯¢ï¼ŒMySQL ä¼šé€’å½’æ‰§è¡Œè¿™äº›å­æŸ¥è¯¢ï¼ŒæŠŠç»“æœæ”¾åœ¨ä¸´æ—¶è¡¨é‡Œ</li><li>UNIONï¼šè‹¥ç¬¬äºŒä¸ª SELECT å‡ºç°åœ¨ UNION åï¼Œåˆ™è¢«æ ‡è®°ä¸º UNIONï¼Œè‹¥ UNION åŒ…å«åœ¨ FROM å­—å¥çš„å­æŸ¥è¯¢ä¸­ï¼Œå¤–å±‚ SELECT å°†è¢«æ ‡è®°ä¸º DERIVED</li><li>UNION RESULTï¼šUNION åçš„ç»“æœé›†</li></ul><h2 id="table"><a href="#table" class="headerlink" title="table"></a>table</h2><p>åæ˜ çš„æ˜¯æ•°æ®ä»å“ªå¼ è¡¨ä¸­è¯»å–å‡ºæ¥ã€‚</p><p>ä¾‹å¦‚ <code>&lt;derived2&gt;</code> è¡¨ç¤ºä» id ä¸º 2 çš„ä¸´æ—¶è¡¨è¯»å–ã€‚</p><h2 id="type"><a href="#type" class="headerlink" title="type"></a>type</h2><p>type æ˜¯è®¿é—®ç±»å‹æ’åºï¼Œåæ˜ çš„æ˜¯ SQL çš„ä¼˜åŒ–çŠ¶æ€ï¼Œæœ‰å¦‚ä¸‹å‡ ç§ï¼š</p><ul><li>systemï¼šä»å•è¡¨åªæŸ¥å‡ºä¸€è¡Œè®°å½•ï¼ˆç­‰äºç³»ç»Ÿè¡¨ï¼‰ï¼Œè¿™æ˜¯ const ç±»å‹çš„ç‰¹ä¾‹ï¼Œä¸€èˆ¬ä¸ä¼šå‡ºç°</li><li>constï¼šæŸ¥è¯¢æ¡ä»¶ç”¨åˆ°äº†å¸¸é‡ï¼Œé€šè¿‡ç´¢å¼•ä¸€æ¬¡å°±æ‰¾åˆ°ï¼Œå¸¸åœ¨ä½¿ç”¨ primary key æˆ– unique ç´¢å¼•ä¸­å‡ºç°</li><li>eq_refï¼šå”¯ä¸€æ€§ç´¢å¼•æ‰«æï¼Œå¯¹äºæ¯ä¸ªç´¢å¼•é”®ï¼Œè¡¨ä¸­åªæœ‰ä¸€æ¡è®°å½•ä¸ä¹‹åŒ¹é…ï¼Œå¸¸è§äºä¸»é”®æˆ–å”¯ä¸€ç´¢å¼•æ‰«æ</li><li>refï¼šéå”¯ä¸€æ€§ç´¢å¼•æ‰«æï¼Œè¿”å›åŒ¹é…æŸä¸ªå•ç‹¬å€¼çš„æ‰€æœ‰è¡Œï¼Œæœ¬è´¨ä¸Šä¹Ÿæ˜¯ä¸€ç§ç´¢å¼•è®¿é—®ï¼Œå®ƒå¯èƒ½ä¼šæ‰¾åˆ°å¤šä¸ªç¬¦åˆæ¡ä»¶çš„è¡Œï¼Œä¸eq_refçš„å·®åˆ«æ˜¯eq_refåªåŒ¹é…äº†ä¸€æ¡è®°å½•</li><li>rangeï¼šåªæ£€ç´¢ç»™å®šèŒƒå›´çš„è¡Œï¼Œä½¿ç”¨ä¸€ä¸ªç´¢å¼•æ¥é€‰æ‹©è¡Œã€‚keyåˆ—æ˜¾ç¤ºä½¿ç”¨äº†å“ªä¸ªç´¢å¼•ï¼Œä¸€èˆ¬æ˜¯åœ¨whereè¯­å¥ä¸­å‡ºç°äº† betweenã€&lt;ã€&gt;ã€in ç­‰çš„æŸ¥è¯¢</li><li>indexï¼šfull Index scanï¼Œindex å’Œ all çš„åŒºåˆ«ä¸º index ç±»å‹åªéå†ç´¢å¼•æ ‘ã€‚è¿™é€šå¸¸æ¯” all å¿«ï¼Œå› ä¸ºç´¢å¼•æ–‡ä»¶é€šå¸¸æ¯”æ•°æ®æ–‡ä»¶å°</li><li>allï¼šå…¨è¡¨æ‰«æï¼Œå¦‚æœæŸ¥è¯¢æ•°æ®é‡å¾ˆå¤§æ—¶ï¼Œå…¨è¡¨æ‰«ææ•ˆç‡æ˜¯å¾ˆä½çš„</li></ul><p>åœ¨ SQL ä¼˜åŒ–ä¸­è‡³å°‘åšåˆ° range çº§åˆ«ï¼Œæœ€å¥½èƒ½è¾¾åˆ° ref çº§åˆ«</p><h2 id="possible-key-amp-key-amp-key-len"><a href="#possible-key-amp-key-amp-key-len" class="headerlink" title="possible_key &amp; key &amp; key_len"></a>possible_key &amp; key &amp; key_len</h2><p>possible_key åæ˜ çš„æ˜¯ MySQL æ¨æµ‹å¯èƒ½ç”¨åˆ°çš„ç´¢å¼•ï¼Œä¸ä¸€å®šè¢«æŸ¥è¯¢å®é™…ä½¿ç”¨åˆ°ã€‚<br>key åæ˜ çš„æ˜¯å®é™…ä½¿ç”¨åˆ°çš„ç´¢å¼•ï¼Œè‹¥ä¸º null åˆ™æ˜¯å› ä¸ºæ²¡æœ‰å»ºç´¢å¼•æˆ–è€…ç´¢å¼•å¤±æ•ˆã€‚<br>key_len åæ˜ ç´¢å¼•ä¸­ä½¿ç”¨çš„å­—èŠ‚æ•°ï¼Œå¯è®¡ç®—è®¡ç®—æŸ¥è¯¢ä¸­ä½¿ç”¨çš„ç´¢å¼•çš„é•¿åº¦ï¼Œè¶ŠçŸ­è¶Šå¥½ã€‚å…¶æ˜¾ç¤ºçš„å€¼ä¸ºç´¢å¼•å­—æ®µçš„æœ€å¤§å¯èƒ½é•¿åº¦ï¼Œè€Œéå®é™…ä½¿ç”¨é•¿åº¦ã€‚</p><h2 id="ref"><a href="#ref" class="headerlink" title="ref"></a>ref</h2><p>ref åæ˜ çš„æ˜¯å“ªäº›åˆ—æˆ–è€…å¸¸é‡è¢«ç”¨äºæŸ¥æ‰¾ç´¢å¼•åˆ—ä¸Šçš„å€¼ã€‚</p><h2 id="rows"><a href="#rows" class="headerlink" title="rows"></a>rows</h2><p>rows åæ˜ çš„æ ¹æ®è¡¨çš„ç»Ÿè®¡ä¿¡æ¯å’Œç´¢å¼•é€‰ç”¨çš„æƒ…å†µï¼Œå¤§è‡´ä¼°ç®—å‡ºæ¥åˆ°æ‰¾åˆ°æ‰€æœ‰è®°å½•æ‰€éœ€è¦è¯»å–çš„è¡Œæ•°ã€‚</p><h2 id="filtered"><a href="#filtered" class="headerlink" title="filtered"></a>filtered</h2><p>ä½¿ç”¨ explain extended æ—¶ä¼šå‡ºç°è¿™ä¸ªåˆ—ï¼Œ5.7 ä¹‹åçš„ç‰ˆæœ¬é»˜è®¤å°±æœ‰è¿™ä¸ªå­—æ®µã€‚è¿™ä¸ªå­—æ®µè¡¨ç¤ºå­˜å‚¨å¼•æ“è¿”å›çš„æ•°æ®åœ¨ server å±‚è¿‡æ»¤åï¼Œå‰©ä¸‹å¤šå°‘æ»¡è¶³æŸ¥è¯¢çš„è®°å½•æ•°é‡çš„æ¯”ä¾‹ï¼Œä¸æ˜¯å…·ä½“è®°å½•æ•°ã€‚</p><h2 id="Extra"><a href="#Extra" class="headerlink" title="Extra"></a>Extra</h2><p>Extra åæ˜ çš„ä¸é€‚åˆåœ¨å…¶ä»–åˆ—æ˜¾ç¤ºï¼Œä½†æ˜¯ä¹Ÿå¾ˆé‡è¦çš„ä¿¡æ¯ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p><ul><li>Using filesortï¼šMySQL ä¸­æ— æ³•åˆ©ç”¨ç´¢å¼•å®Œæˆçš„æ’åºï¼Œè¿™æ—¶ä¼šå¯¹æ•°æ®ä½¿ç”¨ä¸€ä¸ªå¤–éƒ¨çš„ç´¢å¼•æ’åºï¼Œè€Œä¸æ˜¯æŒ‰ç…§è¡¨å†…çš„ç´¢å¼•é¡ºåºè¿›è¡Œè¯»å–ã€‚</li><li>Using temporaryï¼šä½¿ç”¨äº†ä¸´æ—¶è¡¨ä¿å­˜ä¸­é—´ç»“æœï¼ŒMySQL åœ¨å¯¹æŸ¥è¯¢ç»“æœæ’åºæ—¶ä½¿ç”¨ä¸´æ—¶è¡¨ã€‚å¸¸è§äºæ’åº order by å’Œåˆ†ç»„æŸ¥è¯¢ group byã€‚</li><li>Using indexï¼šMySQL ç›¸åº”çš„ select æ“ä½œä¸­ä½¿ç”¨äº†è¦†ç›–ç´¢å¼•ï¼Œé¿å…äº†è®¿é—®è¡¨çš„æ•°æ®è¡Œï¼Œæ•ˆç‡é«˜ã€‚</li><li>Using whereï¼šMySQL ä½¿ç”¨äº† where è¿‡æ»¤ã€‚</li><li>Using join bufferï¼šMySQL ä½¿ç”¨äº†è¿æ¥ç¼“å­˜ã€‚</li><li>Impossible whereï¼šwhere å­å¥çš„å€¼ä¸º falseã€‚</li><li>Distinctï¼šä¼˜åŒ– distinct æ“ä½œï¼Œåœ¨æ‰¾åˆ°ç¬¬ä¸€åŒ¹é…çš„å…ƒç»„åå³åœæ­¢æ‰¾åŒæ ·å€¼çš„åŠ¨ä½œã€‚</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;MySQL-Explain&quot;&gt;&lt;a href=&quot;#MySQL-Explain&quot; class=&quot;headerlink&quot; title=&quot;MySQL Explain&quot;&gt;&lt;/a&gt;MySQL Explain&lt;/h1&gt;&lt;p&gt;Explain æ˜¯ MySQL è‡ªå¸¦çš„æŸ¥è¯¢ä¼˜åŒ–å™¨ã€‚&lt;</summary>
      
    
    
    
    
    <category term="MySQL" scheme="https://orechou.github.io/tags/MySQL/"/>
    
  </entry>
  
</feed>
