<!DOCTYPE html>
<html lang="en-us">
<head>
  
  <link rel="dns-prefetch" href="https://latest.cactus.chat">
  <link rel="preconnect" href="https://latest.cactus.chat" crossorigin>

  
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> 【MySQL】Explain | OreChou</title>
  <link rel = 'canonical' href = 'https://www.orechou.com/posts/2021/mysql_explain/'>
  <meta name="description" content="所有的文字，均致十年后的自己.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:url" content="https://www.orechou.com/posts/2021/mysql_explain/">
  <meta property="og:site_name" content="OreChou">
  <meta property="og:title" content="【MySQL】Explain">
  <meta property="og:description" content="MySQL Explain Explain 是 MySQL 自带的查询优化器。
使用 Explain &#43; SQL 可查询出执行的相关信息，主要包含以下 10 个属性： id, select_type, table, type, possible_key, key, key_len, ref, row, filtered, Extra
数据库性能瓶颈，主要关注 CPU 和 IO。
id 反映的是表的读取顺序，或者查询中 SELECT 的执行顺序。
小表永远驱动大表，三种情况： （1）id 相同，执行顺序是由上至下的 （2）id 不同，如果是子查询，id 序号会递增，id 值越大优先级越高，越先被执行 （3）id 存在相同的，也存在不同的，所有组中，id 越大越先执行，如果 id 相同的，从上往下顺序执行
select_type 反映的是 MySQL 理解的查询类型，有几下几种：
SIMPLE：简单的 SELECT 查询，查询中不包含子查询或 UNION PRIMARY：查询中若包含任何复杂的字部分，最外层查询标记为 PRIMARY SUBQUERY：SELECT 或 WHERE 列表中的子查询 DERIVED：在 FROM 列表中包含的子查询，MySQL 会递归执行这些子查询，把结果放在临时表里 UNION：若第二个 SELECT 出现在 UNION 后，则被标记为 UNION，若 UNION 包含在 FROM 字句的子查询中，外层 SELECT 将被标记为 DERIVED UNION RESULT：UNION 后的结果集 table 反映的是数据从哪张表中读取出来。">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2021-08-06T17:00:00+00:00">
    <meta property="article:modified_time" content="2021-08-06T17:00:00+00:00">
    <meta property="article:tag" content="MySQL">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="【MySQL】Explain">
  <meta name="twitter:description" content="MySQL Explain Explain 是 MySQL 自带的查询优化器。
使用 Explain &#43; SQL 可查询出执行的相关信息，主要包含以下 10 个属性： id, select_type, table, type, possible_key, key, key_len, ref, row, filtered, Extra
数据库性能瓶颈，主要关注 CPU 和 IO。
id 反映的是表的读取顺序，或者查询中 SELECT 的执行顺序。
小表永远驱动大表，三种情况： （1）id 相同，执行顺序是由上至下的 （2）id 不同，如果是子查询，id 序号会递增，id 值越大优先级越高，越先被执行 （3）id 存在相同的，也存在不同的，所有组中，id 越大越先执行，如果 id 相同的，从上往下顺序执行
select_type 反映的是 MySQL 理解的查询类型，有几下几种：
SIMPLE：简单的 SELECT 查询，查询中不包含子查询或 UNION PRIMARY：查询中若包含任何复杂的字部分，最外层查询标记为 PRIMARY SUBQUERY：SELECT 或 WHERE 列表中的子查询 DERIVED：在 FROM 列表中包含的子查询，MySQL 会递归执行这些子查询，把结果放在临时表里 UNION：若第二个 SELECT 出现在 UNION 后，则被标记为 UNION，若 UNION 包含在 FROM 字句的子查询中，外层 SELECT 将被标记为 DERIVED UNION RESULT：UNION 后的结果集 table 反映的是数据从哪张表中读取出来。">

  
  
    
  
  
  <link rel="stylesheet" href="https://www.orechou.com/css/styles.f59e168855cac03647a80389be8d4e966cc06837a3de71c1b96562ddeabd494d52680d81ff33656008c30a0c66df76d770f79469f4cfa414a77be60ec0f403dd.css" integrity="sha512-9Z4WiFXKwDZHqAOJvo1OlmzAaDej3nHBuWVi3eq9SU1SaA2B/zNlYAjDCgxm33bXcPeUafTPpBSne&#43;YOwPQD3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  <link rel="icon" type="image/x-icon" href="https://www.orechou.com/images/favicon.ico" />
<link rel="shortcut icon" type="image/x-icon" href="https://www.orechou.com/images/favicon.ico" />

  
  
  
  
  

  
  <script>
    (function() {
      try {
        
        var savedTheme = localStorage.getItem('theme');
        var systemTheme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        var theme = savedTheme || systemTheme;

        
        if (theme === 'white' || theme === 'classic') {
          theme = 'light';
          localStorage.setItem('theme', theme);
        }

        
        if (theme && theme !== 'default') {
          document.documentElement.classList.add('theme-' + theme);
        }
      } catch (e) {
        
      }
    })();
  </script>

  
  <script>
    document.documentElement.dataset.copyLabel = "Copy";
    document.documentElement.dataset.copiedLabel = "Copied!";
  </script>
</head>

<body class="max-width mx-auto px3 ltr">
  
  <div class="theme-switcher">
    
  </div>

  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'});" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/books">Books</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://www.orechou.com/books/2024/seven-steps-to-mastering-life-at-30/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="toggleDisplay('i-prev')" onmouseout="toggleDisplay('i-prev')"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://www.orechou.com/posts/2021/mysql_%E6%85%A2-sql-%E5%88%86%E6%9E%90/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="toggleDisplay('i-next')" onmouseout="toggleDisplay('i-next')"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'});" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="toggleDisplay('i-top')" onmouseout="toggleDisplay('i-top')"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="toggleDisplay('i-share')" onmouseout="toggleDisplay('i-share')" onclick="toggleDisplay('share');return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&text=%e3%80%90MySQL%e3%80%91Explain" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&title=%e3%80%90MySQL%e3%80%91Explain" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&is_video=false&description=%e3%80%90MySQL%e3%80%91Explain" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=%e3%80%90MySQL%e3%80%91Explain&body=Check out this article: https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&title=%e3%80%90MySQL%e3%80%91Explain" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&title=%e3%80%90MySQL%e3%80%91Explain" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&name=%e3%80%90MySQL%e3%80%91Explain&description=%3ch1%20id%3d%22mysql-explain%22%3eMySQL%20Explain%3c%2fh1%3e%0a%3cp%3eExplain%20%e6%98%af%20MySQL%20%e8%87%aa%e5%b8%a6%e7%9a%84%e6%9f%a5%e8%af%a2%e4%bc%98%e5%8c%96%e5%99%a8%e3%80%82%3c%2fp%3e%0a%3cp%3e%e4%bd%bf%e7%94%a8%20Explain%20%2b%20SQL%20%e5%8f%af%e6%9f%a5%e8%af%a2%e5%87%ba%e6%89%a7%e8%a1%8c%e7%9a%84%e7%9b%b8%e5%85%b3%e4%bf%a1%e6%81%af%ef%bc%8c%e4%b8%bb%e8%a6%81%e5%8c%85%e5%90%ab%e4%bb%a5%e4%b8%8b%2010%20%e4%b8%aa%e5%b1%9e%e6%80%a7%ef%bc%9a%0aid%2c%20select_type%2c%20table%2c%20type%2c%20possible_key%2c%20key%2c%20key_len%2c%20ref%2c%20row%2c%20filtered%2c%20Extra%3c%2fp%3e%0a%3cp%3e%e6%95%b0%e6%8d%ae%e5%ba%93%e6%80%a7%e8%83%bd%e7%93%b6%e9%a2%88%ef%bc%8c%e4%b8%bb%e8%a6%81%e5%85%b3%e6%b3%a8%20CPU%20%e5%92%8c%20IO%e3%80%82%3c%2fp%3e%0a%3ch2%20id%3d%22id%22%3eid%3c%2fh2%3e%0a%3cp%3e%e5%8f%8d%e6%98%a0%e7%9a%84%e6%98%af%e8%a1%a8%e7%9a%84%e8%af%bb%e5%8f%96%e9%a1%ba%e5%ba%8f%ef%bc%8c%e6%88%96%e8%80%85%e6%9f%a5%e8%af%a2%e4%b8%ad%20SELECT%20%e7%9a%84%e6%89%a7%e8%a1%8c%e9%a1%ba%e5%ba%8f%e3%80%82%3c%2fp%3e%0a%3cp%3e%e5%b0%8f%e8%a1%a8%e6%b0%b8%e8%bf%9c%e9%a9%b1%e5%8a%a8%e5%a4%a7%e8%a1%a8%ef%bc%8c%e4%b8%89%e7%a7%8d%e6%83%85%e5%86%b5%ef%bc%9a%0a%ef%bc%881%ef%bc%89id%20%e7%9b%b8%e5%90%8c%ef%bc%8c%e6%89%a7%e8%a1%8c%e9%a1%ba%e5%ba%8f%e6%98%af%e7%94%b1%e4%b8%8a%e8%87%b3%e4%b8%8b%e7%9a%84%0a%ef%bc%882%ef%bc%89id%20%e4%b8%8d%e5%90%8c%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%98%af%e5%ad%90%e6%9f%a5%e8%af%a2%ef%bc%8cid%20%e5%ba%8f%e5%8f%b7%e4%bc%9a%e9%80%92%e5%a2%9e%ef%bc%8cid%20%e5%80%bc%e8%b6%8a%e5%a4%a7%e4%bc%98%e5%85%88%e7%ba%a7%e8%b6%8a%e9%ab%98%ef%bc%8c%e8%b6%8a%e5%85%88%e8%a2%ab%e6%89%a7%e8%a1%8c%0a%ef%bc%883%ef%bc%89id%20%e5%ad%98%e5%9c%a8%e7%9b%b8%e5%90%8c%e7%9a%84%ef%bc%8c%e4%b9%9f%e5%ad%98%e5%9c%a8%e4%b8%8d%e5%90%8c%e7%9a%84%ef%bc%8c%e6%89%80%e6%9c%89%e7%bb%84%e4%b8%ad%ef%bc%8cid%20%e8%b6%8a%e5%a4%a7%e8%b6%8a%e5%85%88%e6%89%a7%e8%a1%8c%ef%bc%8c%e5%a6%82%e6%9e%9c%20id%20%e7%9b%b8%e5%90%8c%e7%9a%84%ef%bc%8c%e4%bb%8e%e4%b8%8a%e5%be%80%e4%b8%8b%e9%a1%ba%e5%ba%8f%e6%89%a7%e8%a1%8c%3c%2fp%3e%0a%3ch2%20id%3d%22select_type%22%3eselect_type%3c%2fh2%3e%0a%3cp%3e%e5%8f%8d%e6%98%a0%e7%9a%84%e6%98%af%20MySQL%20%e7%90%86%e8%a7%a3%e7%9a%84%e6%9f%a5%e8%af%a2%e7%b1%bb%e5%9e%8b%ef%bc%8c%e6%9c%89%e5%87%a0%e4%b8%8b%e5%87%a0%e7%a7%8d%ef%bc%9a%3c%2fp%3e%0a%3cul%3e%0a%3cli%3eSIMPLE%ef%bc%9a%e7%ae%80%e5%8d%95%e7%9a%84%20SELECT%20%e6%9f%a5%e8%af%a2%ef%bc%8c%e6%9f%a5%e8%af%a2%e4%b8%ad%e4%b8%8d%e5%8c%85%e5%90%ab%e5%ad%90%e6%9f%a5%e8%af%a2%e6%88%96%20UNION%3c%2fli%3e%0a%3cli%3ePRIMARY%ef%bc%9a%e6%9f%a5%e8%af%a2%e4%b8%ad%e8%8b%a5%e5%8c%85%e5%90%ab%e4%bb%bb%e4%bd%95%e5%a4%8d%e6%9d%82%e7%9a%84%e5%ad%97%e9%83%a8%e5%88%86%ef%bc%8c%e6%9c%80%e5%a4%96%e5%b1%82%e6%9f%a5%e8%af%a2%e6%a0%87%e8%ae%b0%e4%b8%ba%20PRIMARY%3c%2fli%3e%0a%3cli%3eSUBQUERY%ef%bc%9aSELECT%20%e6%88%96%20WHERE%20%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e5%ad%90%e6%9f%a5%e8%af%a2%3c%2fli%3e%0a%3cli%3eDERIVED%ef%bc%9a%e5%9c%a8%20FROM%20%e5%88%97%e8%a1%a8%e4%b8%ad%e5%8c%85%e5%90%ab%e7%9a%84%e5%ad%90%e6%9f%a5%e8%af%a2%ef%bc%8cMySQL%20%e4%bc%9a%e9%80%92%e5%bd%92%e6%89%a7%e8%a1%8c%e8%bf%99%e4%ba%9b%e5%ad%90%e6%9f%a5%e8%af%a2%ef%bc%8c%e6%8a%8a%e7%bb%93%e6%9e%9c%e6%94%be%e5%9c%a8%e4%b8%b4%e6%97%b6%e8%a1%a8%e9%87%8c%3c%2fli%3e%0a%3cli%3eUNION%ef%bc%9a%e8%8b%a5%e7%ac%ac%e4%ba%8c%e4%b8%aa%20SELECT%20%e5%87%ba%e7%8e%b0%e5%9c%a8%20UNION%20%e5%90%8e%ef%bc%8c%e5%88%99%e8%a2%ab%e6%a0%87%e8%ae%b0%e4%b8%ba%20UNION%ef%bc%8c%e8%8b%a5%20UNION%20%e5%8c%85%e5%90%ab%e5%9c%a8%20FROM%20%e5%ad%97%e5%8f%a5%e7%9a%84%e5%ad%90%e6%9f%a5%e8%af%a2%e4%b8%ad%ef%bc%8c%e5%a4%96%e5%b1%82%20SELECT%20%e5%b0%86%e8%a2%ab%e6%a0%87%e8%ae%b0%e4%b8%ba%20DERIVED%3c%2fli%3e%0a%3cli%3eUNION%20RESULT%ef%bc%9aUNION%20%e5%90%8e%e7%9a%84%e7%bb%93%e6%9e%9c%e9%9b%86%3c%2fli%3e%0a%3c%2ful%3e%0a%3ch2%20id%3d%22table%22%3etable%3c%2fh2%3e%0a%3cp%3e%e5%8f%8d%e6%98%a0%e7%9a%84%e6%98%af%e6%95%b0%e6%8d%ae%e4%bb%8e%e5%93%aa%e5%bc%a0%e8%a1%a8%e4%b8%ad%e8%af%bb%e5%8f%96%e5%87%ba%e6%9d%a5%e3%80%82%3c%2fp%3e" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&t=%e3%80%90MySQL%e3%80%91Explain" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#id">id</a></li>
    <li><a href="#select_type">select_type</a></li>
    <li><a href="#table">table</a></li>
    <li><a href="#type">type</a></li>
    <li><a href="#possible_key--key--key_len">possible_key &amp; key &amp; key_len</a></li>
    <li><a href="#ref">ref</a></li>
    <li><a href="#rows">rows</a></li>
    <li><a href="#filtered">filtered</a></li>
    <li><a href="#extra">Extra</a></li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        【MySQL】Explain
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2021-08-06 17:00:00 &#43;0000 UTC" itemprop="datePublished">2021-08-06</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          7 minute read
        </div>
        
        
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <h1 id="mysql-explain">MySQL Explain</h1>
<p>Explain 是 MySQL 自带的查询优化器。</p>
<p>使用 Explain + SQL 可查询出执行的相关信息，主要包含以下 10 个属性：
id, select_type, table, type, possible_key, key, key_len, ref, row, filtered, Extra</p>
<p>数据库性能瓶颈，主要关注 CPU 和 IO。</p>
<h2 id="id">id</h2>
<p>反映的是表的读取顺序，或者查询中 SELECT 的执行顺序。</p>
<p>小表永远驱动大表，三种情况：
（1）id 相同，执行顺序是由上至下的
（2）id 不同，如果是子查询，id 序号会递增，id 值越大优先级越高，越先被执行
（3）id 存在相同的，也存在不同的，所有组中，id 越大越先执行，如果 id 相同的，从上往下顺序执行</p>
<h2 id="select_type">select_type</h2>
<p>反映的是 MySQL 理解的查询类型，有几下几种：</p>
<ul>
<li>SIMPLE：简单的 SELECT 查询，查询中不包含子查询或 UNION</li>
<li>PRIMARY：查询中若包含任何复杂的字部分，最外层查询标记为 PRIMARY</li>
<li>SUBQUERY：SELECT 或 WHERE 列表中的子查询</li>
<li>DERIVED：在 FROM 列表中包含的子查询，MySQL 会递归执行这些子查询，把结果放在临时表里</li>
<li>UNION：若第二个 SELECT 出现在 UNION 后，则被标记为 UNION，若 UNION 包含在 FROM 字句的子查询中，外层 SELECT 将被标记为 DERIVED</li>
<li>UNION RESULT：UNION 后的结果集</li>
</ul>
<h2 id="table">table</h2>
<p>反映的是数据从哪张表中读取出来。</p>
<p>例如 <code>&lt;derived2&gt;</code> 表示从 id 为 2 的临时表读取。</p>
<h2 id="type">type</h2>
<p>type 是访问类型排序，反映的是 SQL 的优化状态，有如下几种：</p>
<ul>
<li>system：从单表只查出一行记录（等于系统表），这是 const 类型的特例，一般不会出现</li>
<li>const：查询条件用到了常量，通过索引一次就找到，常在使用 primary key 或 unique 索引中出现</li>
<li>eq_ref：唯一性索引扫描，对于每个索引键，表中只有一条记录与之匹配，常见于主键或唯一索引扫描</li>
<li>ref：非唯一性索引扫描，返回匹配某个单独值的所有行，本质上也是一种索引访问，它可能会找到多个符合条件的行，与eq_ref的差别是eq_ref只匹配了一条记录</li>
<li>range：只检索给定范围的行，使用一个索引来选择行。key列显示使用了哪个索引，一般是在where语句中出现了 between、&lt;、&gt;、in 等的查询</li>
<li>index：full Index scan，index 和 all 的区别为 index 类型只遍历索引树。这通常比 all 快，因为索引文件通常比数据文件小</li>
<li>all：全表扫描，如果查询数据量很大时，全表扫描效率是很低的</li>
</ul>
<p>在 SQL 优化中至少做到 range 级别，最好能达到 ref 级别</p>
<h2 id="possible_key--key--key_len">possible_key &amp; key &amp; key_len</h2>
<p>possible_key 反映的是 MySQL 推测可能用到的索引，不一定被查询实际使用到。
key 反映的是实际使用到的索引，若为 null 则是因为没有建索引或者索引失效。
key_len 反映索引中使用的字节数，可计算计算查询中使用的索引的长度，越短越好。其显示的值为索引字段的最大可能长度，而非实际使用长度。</p>
<h2 id="ref">ref</h2>
<p>ref 反映的是哪些列或者常量被用于查找索引列上的值。</p>
<h2 id="rows">rows</h2>
<p>rows 反映的根据表的统计信息和索引选用的情况，大致估算出来到找到所有记录所需要读取的行数。</p>
<h2 id="filtered">filtered</h2>
<p>使用 explain extended 时会出现这个列，5.7 之后的版本默认就有这个字段。这个字段表示存储引擎返回的数据在 server 层过滤后，剩下多少满足查询的记录数量的比例，不是具体记录数。</p>
<h2 id="extra">Extra</h2>
<p>Extra 反映的不适合在其他列显示，但是也很重要的信息，主要有以下几种：</p>
<ul>
<li>Using filesort：MySQL 中无法利用索引完成的排序，这时会对数据使用一个外部的索引排序，而不是按照表内的索引顺序进行读取。</li>
<li>Using temporary：使用了临时表保存中间结果，MySQL 在对查询结果排序时使用临时表。常见于排序 order by 和分组查询 group by。</li>
<li>Using index：MySQL 相应的 select 操作中使用了覆盖索引，避免了访问表的数据行，效率高。</li>
<li>Using where：MySQL 使用了 where 过滤。</li>
<li>Using join buffer：MySQL 使用了连接缓存。</li>
<li>Impossible where：where 子句的值为 false。</li>
<li>Distinct：优化 distinct 操作，在找到第一匹配的元组后即停止找同样值的动作。</li>
</ul>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Posts</a></li>
         
          <li><a href="/books">Books</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#id">id</a></li>
    <li><a href="#select_type">select_type</a></li>
    <li><a href="#table">table</a></li>
    <li><a href="#type">type</a></li>
    <li><a href="#possible_key--key--key_len">possible_key &amp; key &amp; key_len</a></li>
    <li><a href="#ref">ref</a></li>
    <li><a href="#rows">rows</a></li>
    <li><a href="#filtered">filtered</a></li>
    <li><a href="#extra">Extra</a></li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&text=%e3%80%90MySQL%e3%80%91Explain" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&title=%e3%80%90MySQL%e3%80%91Explain" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&is_video=false&description=%e3%80%90MySQL%e3%80%91Explain" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=%e3%80%90MySQL%e3%80%91Explain&body=Check out this article: https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&title=%e3%80%90MySQL%e3%80%91Explain" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&title=%e3%80%90MySQL%e3%80%91Explain" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&name=%e3%80%90MySQL%e3%80%91Explain&description=%3ch1%20id%3d%22mysql-explain%22%3eMySQL%20Explain%3c%2fh1%3e%0a%3cp%3eExplain%20%e6%98%af%20MySQL%20%e8%87%aa%e5%b8%a6%e7%9a%84%e6%9f%a5%e8%af%a2%e4%bc%98%e5%8c%96%e5%99%a8%e3%80%82%3c%2fp%3e%0a%3cp%3e%e4%bd%bf%e7%94%a8%20Explain%20%2b%20SQL%20%e5%8f%af%e6%9f%a5%e8%af%a2%e5%87%ba%e6%89%a7%e8%a1%8c%e7%9a%84%e7%9b%b8%e5%85%b3%e4%bf%a1%e6%81%af%ef%bc%8c%e4%b8%bb%e8%a6%81%e5%8c%85%e5%90%ab%e4%bb%a5%e4%b8%8b%2010%20%e4%b8%aa%e5%b1%9e%e6%80%a7%ef%bc%9a%0aid%2c%20select_type%2c%20table%2c%20type%2c%20possible_key%2c%20key%2c%20key_len%2c%20ref%2c%20row%2c%20filtered%2c%20Extra%3c%2fp%3e%0a%3cp%3e%e6%95%b0%e6%8d%ae%e5%ba%93%e6%80%a7%e8%83%bd%e7%93%b6%e9%a2%88%ef%bc%8c%e4%b8%bb%e8%a6%81%e5%85%b3%e6%b3%a8%20CPU%20%e5%92%8c%20IO%e3%80%82%3c%2fp%3e%0a%3ch2%20id%3d%22id%22%3eid%3c%2fh2%3e%0a%3cp%3e%e5%8f%8d%e6%98%a0%e7%9a%84%e6%98%af%e8%a1%a8%e7%9a%84%e8%af%bb%e5%8f%96%e9%a1%ba%e5%ba%8f%ef%bc%8c%e6%88%96%e8%80%85%e6%9f%a5%e8%af%a2%e4%b8%ad%20SELECT%20%e7%9a%84%e6%89%a7%e8%a1%8c%e9%a1%ba%e5%ba%8f%e3%80%82%3c%2fp%3e%0a%3cp%3e%e5%b0%8f%e8%a1%a8%e6%b0%b8%e8%bf%9c%e9%a9%b1%e5%8a%a8%e5%a4%a7%e8%a1%a8%ef%bc%8c%e4%b8%89%e7%a7%8d%e6%83%85%e5%86%b5%ef%bc%9a%0a%ef%bc%881%ef%bc%89id%20%e7%9b%b8%e5%90%8c%ef%bc%8c%e6%89%a7%e8%a1%8c%e9%a1%ba%e5%ba%8f%e6%98%af%e7%94%b1%e4%b8%8a%e8%87%b3%e4%b8%8b%e7%9a%84%0a%ef%bc%882%ef%bc%89id%20%e4%b8%8d%e5%90%8c%ef%bc%8c%e5%a6%82%e6%9e%9c%e6%98%af%e5%ad%90%e6%9f%a5%e8%af%a2%ef%bc%8cid%20%e5%ba%8f%e5%8f%b7%e4%bc%9a%e9%80%92%e5%a2%9e%ef%bc%8cid%20%e5%80%bc%e8%b6%8a%e5%a4%a7%e4%bc%98%e5%85%88%e7%ba%a7%e8%b6%8a%e9%ab%98%ef%bc%8c%e8%b6%8a%e5%85%88%e8%a2%ab%e6%89%a7%e8%a1%8c%0a%ef%bc%883%ef%bc%89id%20%e5%ad%98%e5%9c%a8%e7%9b%b8%e5%90%8c%e7%9a%84%ef%bc%8c%e4%b9%9f%e5%ad%98%e5%9c%a8%e4%b8%8d%e5%90%8c%e7%9a%84%ef%bc%8c%e6%89%80%e6%9c%89%e7%bb%84%e4%b8%ad%ef%bc%8cid%20%e8%b6%8a%e5%a4%a7%e8%b6%8a%e5%85%88%e6%89%a7%e8%a1%8c%ef%bc%8c%e5%a6%82%e6%9e%9c%20id%20%e7%9b%b8%e5%90%8c%e7%9a%84%ef%bc%8c%e4%bb%8e%e4%b8%8a%e5%be%80%e4%b8%8b%e9%a1%ba%e5%ba%8f%e6%89%a7%e8%a1%8c%3c%2fp%3e%0a%3ch2%20id%3d%22select_type%22%3eselect_type%3c%2fh2%3e%0a%3cp%3e%e5%8f%8d%e6%98%a0%e7%9a%84%e6%98%af%20MySQL%20%e7%90%86%e8%a7%a3%e7%9a%84%e6%9f%a5%e8%af%a2%e7%b1%bb%e5%9e%8b%ef%bc%8c%e6%9c%89%e5%87%a0%e4%b8%8b%e5%87%a0%e7%a7%8d%ef%bc%9a%3c%2fp%3e%0a%3cul%3e%0a%3cli%3eSIMPLE%ef%bc%9a%e7%ae%80%e5%8d%95%e7%9a%84%20SELECT%20%e6%9f%a5%e8%af%a2%ef%bc%8c%e6%9f%a5%e8%af%a2%e4%b8%ad%e4%b8%8d%e5%8c%85%e5%90%ab%e5%ad%90%e6%9f%a5%e8%af%a2%e6%88%96%20UNION%3c%2fli%3e%0a%3cli%3ePRIMARY%ef%bc%9a%e6%9f%a5%e8%af%a2%e4%b8%ad%e8%8b%a5%e5%8c%85%e5%90%ab%e4%bb%bb%e4%bd%95%e5%a4%8d%e6%9d%82%e7%9a%84%e5%ad%97%e9%83%a8%e5%88%86%ef%bc%8c%e6%9c%80%e5%a4%96%e5%b1%82%e6%9f%a5%e8%af%a2%e6%a0%87%e8%ae%b0%e4%b8%ba%20PRIMARY%3c%2fli%3e%0a%3cli%3eSUBQUERY%ef%bc%9aSELECT%20%e6%88%96%20WHERE%20%e5%88%97%e8%a1%a8%e4%b8%ad%e7%9a%84%e5%ad%90%e6%9f%a5%e8%af%a2%3c%2fli%3e%0a%3cli%3eDERIVED%ef%bc%9a%e5%9c%a8%20FROM%20%e5%88%97%e8%a1%a8%e4%b8%ad%e5%8c%85%e5%90%ab%e7%9a%84%e5%ad%90%e6%9f%a5%e8%af%a2%ef%bc%8cMySQL%20%e4%bc%9a%e9%80%92%e5%bd%92%e6%89%a7%e8%a1%8c%e8%bf%99%e4%ba%9b%e5%ad%90%e6%9f%a5%e8%af%a2%ef%bc%8c%e6%8a%8a%e7%bb%93%e6%9e%9c%e6%94%be%e5%9c%a8%e4%b8%b4%e6%97%b6%e8%a1%a8%e9%87%8c%3c%2fli%3e%0a%3cli%3eUNION%ef%bc%9a%e8%8b%a5%e7%ac%ac%e4%ba%8c%e4%b8%aa%20SELECT%20%e5%87%ba%e7%8e%b0%e5%9c%a8%20UNION%20%e5%90%8e%ef%bc%8c%e5%88%99%e8%a2%ab%e6%a0%87%e8%ae%b0%e4%b8%ba%20UNION%ef%bc%8c%e8%8b%a5%20UNION%20%e5%8c%85%e5%90%ab%e5%9c%a8%20FROM%20%e5%ad%97%e5%8f%a5%e7%9a%84%e5%ad%90%e6%9f%a5%e8%af%a2%e4%b8%ad%ef%bc%8c%e5%a4%96%e5%b1%82%20SELECT%20%e5%b0%86%e8%a2%ab%e6%a0%87%e8%ae%b0%e4%b8%ba%20DERIVED%3c%2fli%3e%0a%3cli%3eUNION%20RESULT%ef%bc%9aUNION%20%e5%90%8e%e7%9a%84%e7%bb%93%e6%9e%9c%e9%9b%86%3c%2fli%3e%0a%3c%2ful%3e%0a%3ch2%20id%3d%22table%22%3etable%3c%2fh2%3e%0a%3cp%3e%e5%8f%8d%e6%98%a0%e7%9a%84%e6%98%af%e6%95%b0%e6%8d%ae%e4%bb%8e%e5%93%aa%e5%bc%a0%e8%a1%a8%e4%b8%ad%e8%af%bb%e5%8f%96%e5%87%ba%e6%9d%a5%e3%80%82%3c%2fp%3e" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.orechou.com%2fposts%2f2021%2fmysql_explain%2f&t=%e3%80%90MySQL%e3%80%91Explain" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="toggleDisplay('nav-footer');return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="toggleDisplay('toc-footer');return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="toggleDisplay('share-footer');return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'});" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2026  OreChou 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/books">Books</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/js/main.js defer></script>

<script src=/js/code-copy.js defer></script>




</html>
