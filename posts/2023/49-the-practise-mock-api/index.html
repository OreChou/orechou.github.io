<!DOCTYPE html>
<html lang="en-us">
<head>
  
  <link rel="dns-prefetch" href="https://latest.cactus.chat">
  <link rel="preconnect" href="https://latest.cactus.chat" crossorigin>

  
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/font-awesome/webfonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  <link rel="preload" href="/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous">
  
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title> 关于接口 mock 的技术实现 | OreChou</title>
  <link rel = 'canonical' href = 'https://www.orechou.com/posts/2023/49-the-practise-mock-api/'>
  <meta name="description" content="所有的文字，均致十年后的自己.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="robots" content="all,follow">
  <meta name="googlebot" content="index,follow,snippet,archive">
  <meta property="og:url" content="https://www.orechou.com/posts/2023/49-the-practise-mock-api/">
  <meta property="og:site_name" content="OreChou">
  <meta property="og:title" content="关于接口 mock 的技术实现">
  <meta property="og:description" content="最近在做接口 mock 的功能，用到了一些新的技术，主要有 OpenAPI 规范、JsonSchema 和 mockjs。这里简单的记录下技术方案，以及过程中曾踩到的坑。
原理 整个的原理比较简单，首先 OpenAPI 定义了一套接口规范，按照这个规范我们可以准确的描述一个接口，比如接口的方法类型、出入参格式和内容描述。这是 OpenAPI 规范中文版的文档地址。Apifox、Postman 等接口管理工具对接口的定义也是以这个规范进行存储的。我们可以通过这个地址很直观的观察一份 OpenAPI 规范的接口数据是什么样的。
当我们拥有了接口定义之后，我们就知道了接口的返回体的结构，大部分的服务接口通常将数据以 JSON 的格式进行返回，而描述这个 JSON 格式的就是 JSON Schema。JSON Schema 是 JSON 数据的模式描述语言，用来定义 JSON 数据结构和格式约束。JSON Schema提供了一套验证 JSON 数据有效性的规则集。这是 JSON Schema 规范中文版的文档地址。如果你仔细看的话，就会发现 OpenAPI 规范里面对 JSON 类型的请求体或返回体的就是用 JSON Schema 进行描述的。
最后要做的事情，就是解析 JSON Schema 的定义，将其转换成 mockjs 的模板，让 mockjs 能够 mock 出对应的 JSON。当然我们 Java 微服务要使用 mockjs，需要使用到 ScriptEngine。
踩坑 OpenAPI 扩展字段的存储 为了前端能够直接使用 mockjs 的预制变量，我们对接口定义增加了一个名为 mock 的属性，用以存储预制变量。后面联调的时候发现 mock 属性虽然能够转换到 OpenAPI 格式中，但是读取不出来。最后排查是因为 OpenAPI 的扩展字段需要增加 x- 前缀，且通过 OpenAPIV3Parser.java 解析出来的时候，结构会有变化，不会放在存储的层级结构下，而是放在 extensions 属性字段下面。">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-11T20:50:00+00:00">
    <meta property="article:modified_time" content="2023-09-11T20:50:00+00:00">
    <meta property="article:tag" content="OpenAPI">
    <meta property="article:tag" content="JSON Schema">
    <meta property="article:tag" content="Mockjs">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="关于接口 mock 的技术实现">
  <meta name="twitter:description" content="最近在做接口 mock 的功能，用到了一些新的技术，主要有 OpenAPI 规范、JsonSchema 和 mockjs。这里简单的记录下技术方案，以及过程中曾踩到的坑。
原理 整个的原理比较简单，首先 OpenAPI 定义了一套接口规范，按照这个规范我们可以准确的描述一个接口，比如接口的方法类型、出入参格式和内容描述。这是 OpenAPI 规范中文版的文档地址。Apifox、Postman 等接口管理工具对接口的定义也是以这个规范进行存储的。我们可以通过这个地址很直观的观察一份 OpenAPI 规范的接口数据是什么样的。
当我们拥有了接口定义之后，我们就知道了接口的返回体的结构，大部分的服务接口通常将数据以 JSON 的格式进行返回，而描述这个 JSON 格式的就是 JSON Schema。JSON Schema 是 JSON 数据的模式描述语言，用来定义 JSON 数据结构和格式约束。JSON Schema提供了一套验证 JSON 数据有效性的规则集。这是 JSON Schema 规范中文版的文档地址。如果你仔细看的话，就会发现 OpenAPI 规范里面对 JSON 类型的请求体或返回体的就是用 JSON Schema 进行描述的。
最后要做的事情，就是解析 JSON Schema 的定义，将其转换成 mockjs 的模板，让 mockjs 能够 mock 出对应的 JSON。当然我们 Java 微服务要使用 mockjs，需要使用到 ScriptEngine。
踩坑 OpenAPI 扩展字段的存储 为了前端能够直接使用 mockjs 的预制变量，我们对接口定义增加了一个名为 mock 的属性，用以存储预制变量。后面联调的时候发现 mock 属性虽然能够转换到 OpenAPI 格式中，但是读取不出来。最后排查是因为 OpenAPI 的扩展字段需要增加 x- 前缀，且通过 OpenAPIV3Parser.java 解析出来的时候，结构会有变化，不会放在存储的层级结构下，而是放在 extensions 属性字段下面。">

  
  
    
  
  
  <link rel="stylesheet" href="https://www.orechou.com/css/styles.f59e168855cac03647a80389be8d4e966cc06837a3de71c1b96562ddeabd494d52680d81ff33656008c30a0c66df76d770f79469f4cfa414a77be60ec0f403dd.css" integrity="sha512-9Z4WiFXKwDZHqAOJvo1OlmzAaDej3nHBuWVi3eq9SU1SaA2B/zNlYAjDCgxm33bXcPeUafTPpBSne&#43;YOwPQD3Q=="> 

  
  
  
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  

  <link rel="icon" type="image/x-icon" href="https://www.orechou.com/images/favicon.ico" />
<link rel="shortcut icon" type="image/x-icon" href="https://www.orechou.com/images/favicon.ico" />

  
  
  
  
  

  
  <script>
    (function() {
      try {
        
        var savedTheme = localStorage.getItem('theme');
        var systemTheme = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
        var theme = savedTheme || systemTheme;

        
        if (theme === 'white' || theme === 'classic') {
          theme = 'light';
          localStorage.setItem('theme', theme);
        }

        
        if (theme && theme !== 'default') {
          document.documentElement.classList.add('theme-' + theme);
        }
      } catch (e) {
        
      }
    })();
  </script>

  
  <script>
    document.documentElement.dataset.copyLabel = "Copy";
    document.documentElement.dataset.copiedLabel = "Copied!";
  </script>
</head>

<body class="max-width mx-auto px3 ltr">
  
  <div class="theme-switcher">
    
  </div>

  <div class="content index py4">

  <div id="header-post">
  <a id="menu-icon" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" aria-label="Menu"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'});" style="display:none;" aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/books">Books</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li>
          <a class="icon" href=" https://www.orechou.com/posts/2023/48-there-and-back-again/" aria-label="Previous">
            <i class="fas fa-chevron-left" aria-hidden="true" onmouseover="toggleDisplay('i-prev')" onmouseout="toggleDisplay('i-prev')"></i>
          </a>
        </li>
        
        
        <li>
          <a class="icon" href="https://www.orechou.com/posts/2023/50-attack-on-titan/" aria-label="Next">
            <i class="fas fa-chevron-right" aria-hidden="true" onmouseover="toggleDisplay('i-next')" onmouseout="toggleDisplay('i-next')"></i>
          </a>
        </li>
        
        <li>
          <a class="icon" href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'});" aria-label="Top of Page">
            <i class="fas fa-chevron-up" aria-hidden="true" onmouseover="toggleDisplay('i-top')" onmouseout="toggleDisplay('i-top')"></i>
          </a>
        </li>
        <li>
          <a class="icon" href="#" aria-label="Share">
            <i class="fas fa-share-alt" aria-hidden="true" onmouseover="toggleDisplay('i-share')" onmouseout="toggleDisplay('i-share')" onclick="toggleDisplay('share');return false;"></i>
          </a>
        </li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f" aria-label="Facebook">
      <i class="fab fa-facebook " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&text=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Twitter">
      <i class="fab fa-twitter " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&title=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Linkedin">
      <i class="fab fa-linkedin " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&is_video=false&description=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Pinterest">
      <i class="fab fa-pinterest " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0&body=Check out this article: https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f" aria-label="Email">
      <i class="fas fa-envelope " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&title=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Pocket">
      <i class="fab fa-get-pocket " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&title=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="reddit">
      <i class="fab fa-reddit " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&name=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0&description=%3cp%3e%e6%9c%80%e8%bf%91%e5%9c%a8%e5%81%9a%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e5%8a%9f%e8%83%bd%ef%bc%8c%e7%94%a8%e5%88%b0%e4%ba%86%e4%b8%80%e4%ba%9b%e6%96%b0%e7%9a%84%e6%8a%80%e6%9c%af%ef%bc%8c%e4%b8%bb%e8%a6%81%e6%9c%89%20OpenAPI%20%e8%a7%84%e8%8c%83%e3%80%81JsonSchema%20%e5%92%8c%20mockjs%e3%80%82%e8%bf%99%e9%87%8c%e7%ae%80%e5%8d%95%e7%9a%84%e8%ae%b0%e5%bd%95%e4%b8%8b%e6%8a%80%e6%9c%af%e6%96%b9%e6%a1%88%ef%bc%8c%e4%bb%a5%e5%8f%8a%e8%bf%87%e7%a8%8b%e4%b8%ad%e6%9b%be%e8%b8%a9%e5%88%b0%e7%9a%84%e5%9d%91%e3%80%82%3c%2fp%3e%0a%3ch1%20id%3d%22%e5%8e%9f%e7%90%86%22%3e%e5%8e%9f%e7%90%86%3c%2fh1%3e%0a%3cp%3e%e6%95%b4%e4%b8%aa%e7%9a%84%e5%8e%9f%e7%90%86%e6%af%94%e8%be%83%e7%ae%80%e5%8d%95%ef%bc%8c%e9%a6%96%e5%85%88%20OpenAPI%20%e5%ae%9a%e4%b9%89%e4%ba%86%e4%b8%80%e5%a5%97%e6%8e%a5%e5%8f%a3%e8%a7%84%e8%8c%83%ef%bc%8c%e6%8c%89%e7%85%a7%e8%bf%99%e4%b8%aa%e8%a7%84%e8%8c%83%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e5%87%86%e7%a1%ae%e7%9a%84%e6%8f%8f%e8%bf%b0%e4%b8%80%e4%b8%aa%e6%8e%a5%e5%8f%a3%ef%bc%8c%e6%af%94%e5%a6%82%e6%8e%a5%e5%8f%a3%e7%9a%84%e6%96%b9%e6%b3%95%e7%b1%bb%e5%9e%8b%e3%80%81%e5%87%ba%e5%85%a5%e5%8f%82%e6%a0%bc%e5%bc%8f%e5%92%8c%e5%86%85%e5%ae%b9%e6%8f%8f%e8%bf%b0%e3%80%82%e8%bf%99%e6%98%af%20OpenAPI%20%e8%a7%84%e8%8c%83%e4%b8%ad%e6%96%87%e7%89%88%e7%9a%84%3ca%20href%3d%22https%3a%2f%2fopenapi.apifox.cn%2f%22%3e%e6%96%87%e6%a1%a3%e5%9c%b0%e5%9d%80%3c%2fa%3e%e3%80%82Apifox%e3%80%81Postman%20%e7%ad%89%e6%8e%a5%e5%8f%a3%e7%ae%a1%e7%90%86%e5%b7%a5%e5%85%b7%e5%af%b9%e6%8e%a5%e5%8f%a3%e7%9a%84%e5%ae%9a%e4%b9%89%e4%b9%9f%e6%98%af%e4%bb%a5%e8%bf%99%e4%b8%aa%e8%a7%84%e8%8c%83%e8%bf%9b%e8%a1%8c%e5%ad%98%e5%82%a8%e7%9a%84%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e8%bf%99%e4%b8%aa%3ca%20href%3d%22https%3a%2f%2feditor.swagger.io%2f%22%3e%e5%9c%b0%e5%9d%80%3c%2fa%3e%e5%be%88%e7%9b%b4%e8%a7%82%e7%9a%84%e8%a7%82%e5%af%9f%e4%b8%80%e4%bb%bd%20OpenAPI%20%e8%a7%84%e8%8c%83%e7%9a%84%e6%8e%a5%e5%8f%a3%e6%95%b0%e6%8d%ae%e6%98%af%e4%bb%80%e4%b9%88%e6%a0%b7%e7%9a%84%e3%80%82%3c%2fp%3e%0a%3cp%3e%e5%bd%93%e6%88%91%e4%bb%ac%e6%8b%a5%e6%9c%89%e4%ba%86%e6%8e%a5%e5%8f%a3%e5%ae%9a%e4%b9%89%e4%b9%8b%e5%90%8e%ef%bc%8c%e6%88%91%e4%bb%ac%e5%b0%b1%e7%9f%a5%e9%81%93%e4%ba%86%e6%8e%a5%e5%8f%a3%e7%9a%84%e8%bf%94%e5%9b%9e%e4%bd%93%e7%9a%84%e7%bb%93%e6%9e%84%ef%bc%8c%e5%a4%a7%e9%83%a8%e5%88%86%e7%9a%84%e6%9c%8d%e5%8a%a1%e6%8e%a5%e5%8f%a3%e9%80%9a%e5%b8%b8%e5%b0%86%e6%95%b0%e6%8d%ae%e4%bb%a5%20JSON%20%e7%9a%84%e6%a0%bc%e5%bc%8f%e8%bf%9b%e8%a1%8c%e8%bf%94%e5%9b%9e%ef%bc%8c%e8%80%8c%e6%8f%8f%e8%bf%b0%e8%bf%99%e4%b8%aa%20JSON%20%e6%a0%bc%e5%bc%8f%e7%9a%84%e5%b0%b1%e6%98%af%20JSON%20Schema%e3%80%82JSON%20Schema%20%e6%98%af%20JSON%20%e6%95%b0%e6%8d%ae%e7%9a%84%e6%a8%a1%e5%bc%8f%e6%8f%8f%e8%bf%b0%e8%af%ad%e8%a8%80%ef%bc%8c%e7%94%a8%e6%9d%a5%e5%ae%9a%e4%b9%89%20JSON%20%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e5%92%8c%e6%a0%bc%e5%bc%8f%e7%ba%a6%e6%9d%9f%e3%80%82JSON%20Schema%e6%8f%90%e4%be%9b%e4%ba%86%e4%b8%80%e5%a5%97%e9%aa%8c%e8%af%81%20JSON%20%e6%95%b0%e6%8d%ae%e6%9c%89%e6%95%88%e6%80%a7%e7%9a%84%e8%a7%84%e5%88%99%e9%9b%86%e3%80%82%e8%bf%99%e6%98%af%20JSON%20Schema%20%e8%a7%84%e8%8c%83%e4%b8%ad%e6%96%87%e7%89%88%e7%9a%84%3ca%20href%3d%22https%3a%2f%2fjson-schema.apifox.cn%2f%22%3e%e6%96%87%e6%a1%a3%e5%9c%b0%e5%9d%80%3c%2fa%3e%e3%80%82%e5%a6%82%e6%9e%9c%e4%bd%a0%e4%bb%94%e7%bb%86%e7%9c%8b%e7%9a%84%e8%af%9d%ef%bc%8c%e5%b0%b1%e4%bc%9a%e5%8f%91%e7%8e%b0%20OpenAPI%20%e8%a7%84%e8%8c%83%e9%87%8c%e9%9d%a2%e5%af%b9%20JSON%20%e7%b1%bb%e5%9e%8b%e7%9a%84%e8%af%b7%e6%b1%82%e4%bd%93%e6%88%96%e8%bf%94%e5%9b%9e%e4%bd%93%e7%9a%84%e5%b0%b1%e6%98%af%e7%94%a8%20JSON%20Schema%20%e8%bf%9b%e8%a1%8c%e6%8f%8f%e8%bf%b0%e7%9a%84%e3%80%82%3c%2fp%3e%0a%3cp%3e%e6%9c%80%e5%90%8e%e8%a6%81%e5%81%9a%e7%9a%84%e4%ba%8b%e6%83%85%ef%bc%8c%e5%b0%b1%e6%98%af%e8%a7%a3%e6%9e%90%20JSON%20Schema%20%e7%9a%84%e5%ae%9a%e4%b9%89%ef%bc%8c%e5%b0%86%e5%85%b6%e8%bd%ac%e6%8d%a2%e6%88%90%20mockjs%20%e7%9a%84%e6%a8%a1%e6%9d%bf%ef%bc%8c%e8%ae%a9%20mockjs%20%e8%83%bd%e5%a4%9f%20mock%20%e5%87%ba%e5%af%b9%e5%ba%94%e7%9a%84%20JSON%e3%80%82%e5%bd%93%e7%84%b6%e6%88%91%e4%bb%ac%20Java%20%e5%be%ae%e6%9c%8d%e5%8a%a1%e8%a6%81%e4%bd%bf%e7%94%a8%20mockjs%ef%bc%8c%e9%9c%80%e8%a6%81%e4%bd%bf%e7%94%a8%e5%88%b0%20ScriptEngine%e3%80%82%3c%2fp%3e%0a%3ch1%20id%3d%22%e8%b8%a9%e5%9d%91%22%3e%e8%b8%a9%e5%9d%91%3c%2fh1%3e%0a%3ch2%20id%3d%22openapi-%e6%89%a9%e5%b1%95%e5%ad%97%e6%ae%b5%e7%9a%84%e5%ad%98%e5%82%a8%22%3eOpenAPI%20%e6%89%a9%e5%b1%95%e5%ad%97%e6%ae%b5%e7%9a%84%e5%ad%98%e5%82%a8%3c%2fh2%3e%0a%3cp%3e%e4%b8%ba%e4%ba%86%e5%89%8d%e7%ab%af%e8%83%bd%e5%a4%9f%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8%20mockjs%20%e7%9a%84%e9%a2%84%e5%88%b6%e5%8f%98%e9%87%8f%ef%bc%8c%e6%88%91%e4%bb%ac%e5%af%b9%e6%8e%a5%e5%8f%a3%e5%ae%9a%e4%b9%89%e5%a2%9e%e5%8a%a0%e4%ba%86%e4%b8%80%e4%b8%aa%e5%90%8d%e4%b8%ba%20mock%20%e7%9a%84%e5%b1%9e%e6%80%a7%ef%bc%8c%e7%94%a8%e4%bb%a5%e5%ad%98%e5%82%a8%e9%a2%84%e5%88%b6%e5%8f%98%e9%87%8f%e3%80%82%e5%90%8e%e9%9d%a2%e8%81%94%e8%b0%83%e7%9a%84%e6%97%b6%e5%80%99%e5%8f%91%e7%8e%b0%20mock%20%e5%b1%9e%e6%80%a7%e8%99%bd%e7%84%b6%e8%83%bd%e5%a4%9f%e8%bd%ac%e6%8d%a2%e5%88%b0%20OpenAPI%20%e6%a0%bc%e5%bc%8f%e4%b8%ad%ef%bc%8c%e4%bd%86%e6%98%af%e8%af%bb%e5%8f%96%e4%b8%8d%e5%87%ba%e6%9d%a5%e3%80%82%e6%9c%80%e5%90%8e%e6%8e%92%e6%9f%a5%e6%98%af%e5%9b%a0%e4%b8%ba%20OpenAPI%20%e7%9a%84%e6%89%a9%e5%b1%95%e5%ad%97%e6%ae%b5%e9%9c%80%e8%a6%81%e5%a2%9e%e5%8a%a0%20x-%20%e5%89%8d%e7%bc%80%ef%bc%8c%e4%b8%94%e9%80%9a%e8%bf%87%20OpenAPIV3Parser.java%20%e8%a7%a3%e6%9e%90%e5%87%ba%e6%9d%a5%e7%9a%84%e6%97%b6%e5%80%99%ef%bc%8c%e7%bb%93%e6%9e%84%e4%bc%9a%e6%9c%89%e5%8f%98%e5%8c%96%ef%bc%8c%e4%b8%8d%e4%bc%9a%e6%94%be%e5%9c%a8%e5%ad%98%e5%82%a8%e7%9a%84%e5%b1%82%e7%ba%a7%e7%bb%93%e6%9e%84%e4%b8%8b%ef%bc%8c%e8%80%8c%e6%98%af%e6%94%be%e5%9c%a8%20extensions%20%e5%b1%9e%e6%80%a7%e5%ad%97%e6%ae%b5%e4%b8%8b%e9%9d%a2%e3%80%82%3c%2fp%3e" aria-label="Tumblr">
      <i class="fab fa-tumblr " aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&t=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Hacker News">
      <i class="fab fa-hacker-news " aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>
    
    <div id="toc">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#openapi-扩展字段的存储">OpenAPI 扩展字段的存储</a></li>
    <li><a href="#mockjs-无法直接-mock-json-数组">mockjs 无法直接 mock JSON 数组</a></li>
  </ul>
</nav>
    </div>
    
  </span>
</div>


  <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
    <header>
      <h1 class="posttitle" itemprop="name headline">
        关于接口 mock 的技术实现
      </h1>
      <div class="meta">
        
        <div class="postdate">
          
          <time datetime="2023-09-11 20:50:00 &#43;0000 UTC" itemprop="datePublished">2023-09-11</time>
          
        </div>
        
        
        <div class="article-read-time">
          <i class="far fa-clock"></i>
          
          4 minute read
        </div>
        
        
        
        <div class="article-tag">
            <i class="fas fa-tag"></i>
            
            
            <a class="tag-link" href="/tags/openapi" rel="tag">OpenAPI</a>
            
             ,  
            <a class="tag-link" href="/tags/json-schema" rel="tag">JSON Schema</a>
            
             ,  
            <a class="tag-link" href="/tags/mockjs" rel="tag">mockjs</a>
            
        </div>
        
      </div>
    </header>

  
    
    <div class="content" itemprop="articleBody">
      <p>最近在做接口 mock 的功能，用到了一些新的技术，主要有 OpenAPI 规范、JsonSchema 和 mockjs。这里简单的记录下技术方案，以及过程中曾踩到的坑。</p>
<h1 id="原理">原理</h1>
<p>整个的原理比较简单，首先 OpenAPI 定义了一套接口规范，按照这个规范我们可以准确的描述一个接口，比如接口的方法类型、出入参格式和内容描述。这是 OpenAPI 规范中文版的<a href="https://openapi.apifox.cn/">文档地址</a>。Apifox、Postman 等接口管理工具对接口的定义也是以这个规范进行存储的。我们可以通过这个<a href="https://editor.swagger.io/">地址</a>很直观的观察一份 OpenAPI 规范的接口数据是什么样的。</p>
<p>当我们拥有了接口定义之后，我们就知道了接口的返回体的结构，大部分的服务接口通常将数据以 JSON 的格式进行返回，而描述这个 JSON 格式的就是 JSON Schema。JSON Schema 是 JSON 数据的模式描述语言，用来定义 JSON 数据结构和格式约束。JSON Schema提供了一套验证 JSON 数据有效性的规则集。这是 JSON Schema 规范中文版的<a href="https://json-schema.apifox.cn/">文档地址</a>。如果你仔细看的话，就会发现 OpenAPI 规范里面对 JSON 类型的请求体或返回体的就是用 JSON Schema 进行描述的。</p>
<p>最后要做的事情，就是解析 JSON Schema 的定义，将其转换成 mockjs 的模板，让 mockjs 能够 mock 出对应的 JSON。当然我们 Java 微服务要使用 mockjs，需要使用到 ScriptEngine。</p>
<h1 id="踩坑">踩坑</h1>
<h2 id="openapi-扩展字段的存储">OpenAPI 扩展字段的存储</h2>
<p>为了前端能够直接使用 mockjs 的预制变量，我们对接口定义增加了一个名为 mock 的属性，用以存储预制变量。后面联调的时候发现 mock 属性虽然能够转换到 OpenAPI 格式中，但是读取不出来。最后排查是因为 OpenAPI 的扩展字段需要增加 x- 前缀，且通过 OpenAPIV3Parser.java 解析出来的时候，结构会有变化，不会放在存储的层级结构下，而是放在 extensions 属性字段下面。</p>
<h2 id="mockjs-无法直接-mock-json-数组">mockjs 无法直接 mock JSON 数组</h2>
<p>这个其实是 mockjs 一直没有支持的功能，Github 上的 <a href="https://github.com/nuysoft/Mock/issues/6">Issue 链接</a>已明确了不会支持。因为这个 feature 不支持，最终我们不得不在项目代码里面做一些兼容，因为我们需要 mockjs 能够动态生成 JSON 数组里面元素个数的能力。最后的 mock JSON 数组，其实是 mock 一个带属性的 JSON 对象，这个属性值就是实际需要的 JSON 数组，最后将这个提取这个属性的值进行返回。</p>
<h1 id="总结">总结</h1>
<p>做接口 mock 大体是一件比较有意思的意思。当大家在系统中定义好接口之后，使用者可以直接调用 mock 服务的地址，再加上他们的接口 url，就可以得到他们想要的内容。在一个比较大的公司里面，有这样统一工具对大家工作上面的对接效率提升也是比较大的，不仅体现在前后短联调，也体现在微服务之间的相互调用。</p>

    </div>
  </article>

  
  






  <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/posts">Posts</a></li>
         
          <li><a href="/books">Books</a></li>
         
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>

    
    <div id="toc-footer" style="display: none">
      <nav id="TableOfContents">
  <ul>
    <li><a href="#openapi-扩展字段的存储">OpenAPI 扩展字段的存储</a></li>
    <li><a href="#mockjs-无法直接-mock-json-数组">mockjs 无法直接 mock JSON 数组</a></li>
  </ul>
</nav>
    </div>
    

    <div id="share-footer" style="display: none">
      
      <ul>
  
  
    
  
  
  <li>
    <a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f" aria-label="Facebook">
      <i class="fab fa-facebook fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://twitter.com/share?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&text=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Twitter">
      <i class="fab fa-twitter fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&title=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Linkedin">
      <i class="fab fa-linkedin fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&is_video=false&description=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Pinterest">
      <i class="fab fa-pinterest fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="mailto:?subject=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0&body=Check out this article: https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f" aria-label="Email">
      <i class="fas fa-envelope fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&title=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Pocket">
      <i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&title=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="reddit">
      <i class="fab fa-reddit fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&name=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0&description=%3cp%3e%e6%9c%80%e8%bf%91%e5%9c%a8%e5%81%9a%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e5%8a%9f%e8%83%bd%ef%bc%8c%e7%94%a8%e5%88%b0%e4%ba%86%e4%b8%80%e4%ba%9b%e6%96%b0%e7%9a%84%e6%8a%80%e6%9c%af%ef%bc%8c%e4%b8%bb%e8%a6%81%e6%9c%89%20OpenAPI%20%e8%a7%84%e8%8c%83%e3%80%81JsonSchema%20%e5%92%8c%20mockjs%e3%80%82%e8%bf%99%e9%87%8c%e7%ae%80%e5%8d%95%e7%9a%84%e8%ae%b0%e5%bd%95%e4%b8%8b%e6%8a%80%e6%9c%af%e6%96%b9%e6%a1%88%ef%bc%8c%e4%bb%a5%e5%8f%8a%e8%bf%87%e7%a8%8b%e4%b8%ad%e6%9b%be%e8%b8%a9%e5%88%b0%e7%9a%84%e5%9d%91%e3%80%82%3c%2fp%3e%0a%3ch1%20id%3d%22%e5%8e%9f%e7%90%86%22%3e%e5%8e%9f%e7%90%86%3c%2fh1%3e%0a%3cp%3e%e6%95%b4%e4%b8%aa%e7%9a%84%e5%8e%9f%e7%90%86%e6%af%94%e8%be%83%e7%ae%80%e5%8d%95%ef%bc%8c%e9%a6%96%e5%85%88%20OpenAPI%20%e5%ae%9a%e4%b9%89%e4%ba%86%e4%b8%80%e5%a5%97%e6%8e%a5%e5%8f%a3%e8%a7%84%e8%8c%83%ef%bc%8c%e6%8c%89%e7%85%a7%e8%bf%99%e4%b8%aa%e8%a7%84%e8%8c%83%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e5%87%86%e7%a1%ae%e7%9a%84%e6%8f%8f%e8%bf%b0%e4%b8%80%e4%b8%aa%e6%8e%a5%e5%8f%a3%ef%bc%8c%e6%af%94%e5%a6%82%e6%8e%a5%e5%8f%a3%e7%9a%84%e6%96%b9%e6%b3%95%e7%b1%bb%e5%9e%8b%e3%80%81%e5%87%ba%e5%85%a5%e5%8f%82%e6%a0%bc%e5%bc%8f%e5%92%8c%e5%86%85%e5%ae%b9%e6%8f%8f%e8%bf%b0%e3%80%82%e8%bf%99%e6%98%af%20OpenAPI%20%e8%a7%84%e8%8c%83%e4%b8%ad%e6%96%87%e7%89%88%e7%9a%84%3ca%20href%3d%22https%3a%2f%2fopenapi.apifox.cn%2f%22%3e%e6%96%87%e6%a1%a3%e5%9c%b0%e5%9d%80%3c%2fa%3e%e3%80%82Apifox%e3%80%81Postman%20%e7%ad%89%e6%8e%a5%e5%8f%a3%e7%ae%a1%e7%90%86%e5%b7%a5%e5%85%b7%e5%af%b9%e6%8e%a5%e5%8f%a3%e7%9a%84%e5%ae%9a%e4%b9%89%e4%b9%9f%e6%98%af%e4%bb%a5%e8%bf%99%e4%b8%aa%e8%a7%84%e8%8c%83%e8%bf%9b%e8%a1%8c%e5%ad%98%e5%82%a8%e7%9a%84%e3%80%82%e6%88%91%e4%bb%ac%e5%8f%af%e4%bb%a5%e9%80%9a%e8%bf%87%e8%bf%99%e4%b8%aa%3ca%20href%3d%22https%3a%2f%2feditor.swagger.io%2f%22%3e%e5%9c%b0%e5%9d%80%3c%2fa%3e%e5%be%88%e7%9b%b4%e8%a7%82%e7%9a%84%e8%a7%82%e5%af%9f%e4%b8%80%e4%bb%bd%20OpenAPI%20%e8%a7%84%e8%8c%83%e7%9a%84%e6%8e%a5%e5%8f%a3%e6%95%b0%e6%8d%ae%e6%98%af%e4%bb%80%e4%b9%88%e6%a0%b7%e7%9a%84%e3%80%82%3c%2fp%3e%0a%3cp%3e%e5%bd%93%e6%88%91%e4%bb%ac%e6%8b%a5%e6%9c%89%e4%ba%86%e6%8e%a5%e5%8f%a3%e5%ae%9a%e4%b9%89%e4%b9%8b%e5%90%8e%ef%bc%8c%e6%88%91%e4%bb%ac%e5%b0%b1%e7%9f%a5%e9%81%93%e4%ba%86%e6%8e%a5%e5%8f%a3%e7%9a%84%e8%bf%94%e5%9b%9e%e4%bd%93%e7%9a%84%e7%bb%93%e6%9e%84%ef%bc%8c%e5%a4%a7%e9%83%a8%e5%88%86%e7%9a%84%e6%9c%8d%e5%8a%a1%e6%8e%a5%e5%8f%a3%e9%80%9a%e5%b8%b8%e5%b0%86%e6%95%b0%e6%8d%ae%e4%bb%a5%20JSON%20%e7%9a%84%e6%a0%bc%e5%bc%8f%e8%bf%9b%e8%a1%8c%e8%bf%94%e5%9b%9e%ef%bc%8c%e8%80%8c%e6%8f%8f%e8%bf%b0%e8%bf%99%e4%b8%aa%20JSON%20%e6%a0%bc%e5%bc%8f%e7%9a%84%e5%b0%b1%e6%98%af%20JSON%20Schema%e3%80%82JSON%20Schema%20%e6%98%af%20JSON%20%e6%95%b0%e6%8d%ae%e7%9a%84%e6%a8%a1%e5%bc%8f%e6%8f%8f%e8%bf%b0%e8%af%ad%e8%a8%80%ef%bc%8c%e7%94%a8%e6%9d%a5%e5%ae%9a%e4%b9%89%20JSON%20%e6%95%b0%e6%8d%ae%e7%bb%93%e6%9e%84%e5%92%8c%e6%a0%bc%e5%bc%8f%e7%ba%a6%e6%9d%9f%e3%80%82JSON%20Schema%e6%8f%90%e4%be%9b%e4%ba%86%e4%b8%80%e5%a5%97%e9%aa%8c%e8%af%81%20JSON%20%e6%95%b0%e6%8d%ae%e6%9c%89%e6%95%88%e6%80%a7%e7%9a%84%e8%a7%84%e5%88%99%e9%9b%86%e3%80%82%e8%bf%99%e6%98%af%20JSON%20Schema%20%e8%a7%84%e8%8c%83%e4%b8%ad%e6%96%87%e7%89%88%e7%9a%84%3ca%20href%3d%22https%3a%2f%2fjson-schema.apifox.cn%2f%22%3e%e6%96%87%e6%a1%a3%e5%9c%b0%e5%9d%80%3c%2fa%3e%e3%80%82%e5%a6%82%e6%9e%9c%e4%bd%a0%e4%bb%94%e7%bb%86%e7%9c%8b%e7%9a%84%e8%af%9d%ef%bc%8c%e5%b0%b1%e4%bc%9a%e5%8f%91%e7%8e%b0%20OpenAPI%20%e8%a7%84%e8%8c%83%e9%87%8c%e9%9d%a2%e5%af%b9%20JSON%20%e7%b1%bb%e5%9e%8b%e7%9a%84%e8%af%b7%e6%b1%82%e4%bd%93%e6%88%96%e8%bf%94%e5%9b%9e%e4%bd%93%e7%9a%84%e5%b0%b1%e6%98%af%e7%94%a8%20JSON%20Schema%20%e8%bf%9b%e8%a1%8c%e6%8f%8f%e8%bf%b0%e7%9a%84%e3%80%82%3c%2fp%3e%0a%3cp%3e%e6%9c%80%e5%90%8e%e8%a6%81%e5%81%9a%e7%9a%84%e4%ba%8b%e6%83%85%ef%bc%8c%e5%b0%b1%e6%98%af%e8%a7%a3%e6%9e%90%20JSON%20Schema%20%e7%9a%84%e5%ae%9a%e4%b9%89%ef%bc%8c%e5%b0%86%e5%85%b6%e8%bd%ac%e6%8d%a2%e6%88%90%20mockjs%20%e7%9a%84%e6%a8%a1%e6%9d%bf%ef%bc%8c%e8%ae%a9%20mockjs%20%e8%83%bd%e5%a4%9f%20mock%20%e5%87%ba%e5%af%b9%e5%ba%94%e7%9a%84%20JSON%e3%80%82%e5%bd%93%e7%84%b6%e6%88%91%e4%bb%ac%20Java%20%e5%be%ae%e6%9c%8d%e5%8a%a1%e8%a6%81%e4%bd%bf%e7%94%a8%20mockjs%ef%bc%8c%e9%9c%80%e8%a6%81%e4%bd%bf%e7%94%a8%e5%88%b0%20ScriptEngine%e3%80%82%3c%2fp%3e%0a%3ch1%20id%3d%22%e8%b8%a9%e5%9d%91%22%3e%e8%b8%a9%e5%9d%91%3c%2fh1%3e%0a%3ch2%20id%3d%22openapi-%e6%89%a9%e5%b1%95%e5%ad%97%e6%ae%b5%e7%9a%84%e5%ad%98%e5%82%a8%22%3eOpenAPI%20%e6%89%a9%e5%b1%95%e5%ad%97%e6%ae%b5%e7%9a%84%e5%ad%98%e5%82%a8%3c%2fh2%3e%0a%3cp%3e%e4%b8%ba%e4%ba%86%e5%89%8d%e7%ab%af%e8%83%bd%e5%a4%9f%e7%9b%b4%e6%8e%a5%e4%bd%bf%e7%94%a8%20mockjs%20%e7%9a%84%e9%a2%84%e5%88%b6%e5%8f%98%e9%87%8f%ef%bc%8c%e6%88%91%e4%bb%ac%e5%af%b9%e6%8e%a5%e5%8f%a3%e5%ae%9a%e4%b9%89%e5%a2%9e%e5%8a%a0%e4%ba%86%e4%b8%80%e4%b8%aa%e5%90%8d%e4%b8%ba%20mock%20%e7%9a%84%e5%b1%9e%e6%80%a7%ef%bc%8c%e7%94%a8%e4%bb%a5%e5%ad%98%e5%82%a8%e9%a2%84%e5%88%b6%e5%8f%98%e9%87%8f%e3%80%82%e5%90%8e%e9%9d%a2%e8%81%94%e8%b0%83%e7%9a%84%e6%97%b6%e5%80%99%e5%8f%91%e7%8e%b0%20mock%20%e5%b1%9e%e6%80%a7%e8%99%bd%e7%84%b6%e8%83%bd%e5%a4%9f%e8%bd%ac%e6%8d%a2%e5%88%b0%20OpenAPI%20%e6%a0%bc%e5%bc%8f%e4%b8%ad%ef%bc%8c%e4%bd%86%e6%98%af%e8%af%bb%e5%8f%96%e4%b8%8d%e5%87%ba%e6%9d%a5%e3%80%82%e6%9c%80%e5%90%8e%e6%8e%92%e6%9f%a5%e6%98%af%e5%9b%a0%e4%b8%ba%20OpenAPI%20%e7%9a%84%e6%89%a9%e5%b1%95%e5%ad%97%e6%ae%b5%e9%9c%80%e8%a6%81%e5%a2%9e%e5%8a%a0%20x-%20%e5%89%8d%e7%bc%80%ef%bc%8c%e4%b8%94%e9%80%9a%e8%bf%87%20OpenAPIV3Parser.java%20%e8%a7%a3%e6%9e%90%e5%87%ba%e6%9d%a5%e7%9a%84%e6%97%b6%e5%80%99%ef%bc%8c%e7%bb%93%e6%9e%84%e4%bc%9a%e6%9c%89%e5%8f%98%e5%8c%96%ef%bc%8c%e4%b8%8d%e4%bc%9a%e6%94%be%e5%9c%a8%e5%ad%98%e5%82%a8%e7%9a%84%e5%b1%82%e7%ba%a7%e7%bb%93%e6%9e%84%e4%b8%8b%ef%bc%8c%e8%80%8c%e6%98%af%e6%94%be%e5%9c%a8%20extensions%20%e5%b1%9e%e6%80%a7%e5%ad%97%e6%ae%b5%e4%b8%8b%e9%9d%a2%e3%80%82%3c%2fp%3e" aria-label="Tumblr">
      <i class="fab fa-tumblr fa-lg" aria-hidden="true"></i>
    </a>
  </li>
  <li>
    <a class="icon" href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwww.orechou.com%2fposts%2f2023%2f49-the-practise-mock-api%2f&t=%e5%85%b3%e4%ba%8e%e6%8e%a5%e5%8f%a3%20mock%20%e7%9a%84%e6%8a%80%e6%9c%af%e5%ae%9e%e7%8e%b0" aria-label="Hacker News">
      <i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i>
    </a>
  </li>
</ul>

    </div>

    <div id="actions-footer">
      
        <a id="menu-toggle" class="icon" href="#" onclick="toggleDisplay('nav-footer');return false;" aria-label="Menu">
          <i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        
        <a id="toc-toggle" class="icon" href="#" onclick="toggleDisplay('toc-footer');return false;" aria-label="TOC">
          <i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        
        <a id="share-toggle" class="icon" href="#" onclick="toggleDisplay('share-footer');return false;" aria-label="Share">
          <i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="window.scrollTo({top: 0, behavior: 'smooth'});" aria-label="Top of Page">
          <i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>


  <footer id="footer">
  <div class="footer-left">
    Copyright  &copy; 2026  OreChou 
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
        <li><a href="/">Home</a></li>
         
        <li><a href="/posts">Posts</a></li>
         
        <li><a href="/books">Books</a></li>
         
        <li><a href="/about">About</a></li>
        
      </ul>
    </nav>
  </div>
</footer>


  </div>
</body>

<link rel="stylesheet" href=/lib/font-awesome/css/all.min.css>
<script src=/js/main.js defer></script>

<script src=/js/code-copy.js defer></script>




</html>
